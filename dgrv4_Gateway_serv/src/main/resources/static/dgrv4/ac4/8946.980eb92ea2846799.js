"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[8946],{68946:(ke,N,l)=>{l.r(N),l.d(N,{Ac0320Module:()=>Ue});var T=l(69808),U=l(48750),k=l(31890),a=l(93075),q=l(86347),A=l(99291),v=l(15861),Z=l(59783),P=l(58348),H=l(14525),C=l(1694),L=l(94327),M=l(57553),e=l(87587),I=l(56435),J=l(4516),R=l(38441),Y=l(41313),V=l(86518),O=l(63710),x=l(23099),Q=l(40845),E=l(4119),F=l(49603),B=l(61208),w=l(73407),j=l(17773),G=l(19114),X=l(51062);function z(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",64)(1,"div",65)(2,"button",66),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateStatus("Y")}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",66),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateStatus("N")}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"button",67),e.NdJ("click",function(){return e.CHM(t),e.oxw().export()}),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"div",65)(12,"button",68),e.NdJ("click",function(){return e.CHM(t),e.oxw().changePageImport()}),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"button",69),e.NdJ("click",function(){return e.CHM(t),e.oxw().changePage("create")}),e._uU(16),e.ALo(17,"translate"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("disabled",0==t.selected.length),e.xp6(1),e.hij(" ",e.lcZ(4,8,"button.enable")," "),e.xp6(2),e.Q6J("disabled",0==t.selected.length),e.xp6(1),e.hij(" ",e.lcZ(7,10,"button.disable")," "),e.xp6(2),e.Q6J("disabled",0==t.selected.length),e.xp6(1),e.hij(" ",e.lcZ(10,12,"button.export")," "),e.xp6(4),e.Oqu(e.lcZ(14,14,"button.import")),e.xp6(3),e.Oqu(e.lcZ(17,16,"button.create"))}}function D(n,i){1&n&&(e.TgZ(0,"tr",70)(1,"th",71),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",72),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"th"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"th",73),e._uU(19),e.ALo(20,"translate"),e.qZA()()),2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,6,"status")),e.xp6(3),e.Oqu(e.lcZ(8,8,"grpc.tar_serv")),e.xp6(3),e.Oqu(e.lcZ(11,10,"grpc.proxy_host")),e.xp6(3),e.Oqu(e.lcZ(14,12,"grpc.tar_host")),e.xp6(3),e.Oqu(e.lcZ(17,14,"grpc.tar_port")),e.xp6(3),e.Oqu(e.lcZ(20,16,"action")))}function K(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",74),e.qZA(),e.TgZ(3,"td",70),e._UZ(4,"img",75),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td",70)(14,"button",76),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().changePage("update",s)}),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"button",77),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().changePage("delete",s)}),e.ALo(17,"translate"),e.qZA()()()}if(2&n){const t=i.$implicit;e.xp6(2),e.Q6J("value",t),e.xp6(2),e.Q6J("alt",t.enable)("src","Y"===t.enable?"assets/images/icon_green.png":"assets/images/icon_red.png",e.LSH),e.xp6(2),e.Oqu(t.serviceName),e.xp6(2),e.Oqu(t.proxyHostName),e.xp6(2),e.Oqu(t.targetHostName),e.xp6(2),e.Oqu(t.targetPort),e.xp6(2),e.Q6J("pTooltip",e.lcZ(15,9,"button.update")),e.xp6(2),e.Q6J("pTooltip",e.lcZ(17,11,"button.delete"))}}function W(n,i){1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(1),e.uIk("colspan",7),e.xp6(1),e.hij(" ",e.lcZ(3,2,"no_rec")," "))}function ee(n,i){1&n&&(e.TgZ(0,"div",9)(1,"div",18)(2,"label",78),e._uU(3,"gRPC Proxy Id"),e.qZA(),e._UZ(4,"input",79),e.qZA()())}function te(n,i){if(1&n&&(e.TgZ(0,"div",80)(1,"small",81),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,null==t.serviceName?null:t.serviceName.errors.isRequired))}}function oe(n,i){if(1&n&&(e.TgZ(0,"div",80)(1,"small",81),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,null==t.targetHostName?null:t.targetHostName.errors.isRequired))}}function ne(n,i){if(1&n&&(e.TgZ(0,"div",80)(1,"small",81),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,null==t.targetPort?null:t.targetPort.errors.isRequired))}}function re(n,i){1&n&&(e.TgZ(0,"div",28)(1,"div",82)(2,"div",13),e._UZ(3,"p-checkbox",83),e.TgZ(4,"label",84),e._uU(5),e.ALo(6,"translate"),e.qZA()()()()),2&n&&(e.xp6(3),e.Q6J("binary",!0)("trueValue","N")("falseValue","Y"),e.xp6(2),e.Oqu(e.lcZ(6,4,"grpc.autotrust_certs")))}function se(n,i){1&n&&(e.TgZ(0,"div",85)(1,"label",86),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"i",87),e.ALo(5,"translate"),e.ALo(6,"translate"),e.ALo(7,"translate"),e.ALo(8,"translate"),e.ALo(9,"translate"),e.ALo(10,"translate"),e.ALo(11,"translate"),e._UZ(12,"textarea",88),e.qZA()),2&n&&(e.xp6(2),e.hij("",e.lcZ(3,3,"certificate_authority"),"( X.509 )"),e.xp6(2),e.Q6J("pTooltip",e.lcZ(5,5,"grpc.cert_tip_1")+"<br/>"+e.lcZ(6,7,"grpc.cert_tip_2")+"<br/>"+e.lcZ(7,9,"grpc.cert_tip_3")+"<br/>"+e.lcZ(8,11,"grpc.cert_tip_4")+"<br/>"+e.lcZ(9,13,"grpc.cert_tip_4_1")+"<br/>"+e.lcZ(10,15,"grpc.cert_tip_4_2")+"<br/>"+e.lcZ(11,17,"grpc.cert_tip_4_3"))("escape",!1))}function ie(n,i){if(1&n&&(e.TgZ(0,"div",80)(1,"small",81),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,null==t.trustedCertsContent?null:t.trustedCertsContent.errors.required))}}function le(n,i){if(1&n&&(e.TgZ(0,"div",80)(1,"small",81),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,null==t.proxyHostName?null:t.proxyHostName.errors.isRequired))}}function ae(n,i){if(1&n&&(e.TgZ(0,"div",80)(1,"small",81),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,null==t.connectTimeoutMs?null:t.connectTimeoutMs.errors.isRequired))}}function ce(n,i){if(1&n&&(e.TgZ(0,"div",80)(1,"small",81),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,null==t.sendTimeoutMs?null:t.sendTimeoutMs.errors.isRequired))}}function ue(n,i){if(1&n&&(e.TgZ(0,"div",80)(1,"small",81),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,null==t.readTimeoutMs?null:t.readTimeoutMs.errors.isRequired))}}function pe(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",89),e.NdJ("click",function(){return e.CHM(t),e.oxw().create()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.formEdit.invalid),e.xp6(1),e.Oqu(e.lcZ(2,2,"button.create"))}}function de(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",90),e.NdJ("click",function(){return e.CHM(t),e.oxw().update()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.formEdit.invalid),e.xp6(1),e.Oqu(e.lcZ(2,2,"button.update"))}}function me(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",91)(1,"button",92),e.NdJ("click",function(){return e.CHM(t),e.oxw().import()}),e._uU(2),e.ALo(3,"translate"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!t.importList||0==t.importSelected.length),e.xp6(1),e.hij(" ",e.lcZ(3,2,"button.import")," ")}}function ge(n,i){}function _e(n,i){1&n&&(e.TgZ(0,"tr",70)(1,"th",93),e._UZ(2,"p-tableHeaderCheckbox"),e.qZA(),e.TgZ(3,"th",94),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",95),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",95),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th",95),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"th",95),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"th",96),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"th",96),e._uU(22),e.ALo(23,"translate"),e.qZA()(),e.TgZ(24,"tr",70)(25,"th",97),e._uU(26),e.ALo(27,"translate"),e.qZA()()),2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,8,"status")),e.xp6(3),e.Oqu(e.lcZ(8,10,"grpc.tar_serv")),e.xp6(3),e.Oqu(e.lcZ(11,12,"grpc.proxy_host")),e.xp6(3),e.Oqu(e.lcZ(14,14,"grpc.tar_host")),e.xp6(3),e.Oqu(e.lcZ(17,16,"grpc.tar_port")),e.xp6(3),e.Oqu(e.lcZ(20,18,"check_action")),e.xp6(3),e.Oqu(e.lcZ(23,20,"import_result")),e.xp6(4),e.Oqu(e.lcZ(27,22,"desc")))}function ve(n,i){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.BQk()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",t.success?e.lcZ(2,1,"message.success"):e.lcZ(3,3,"message.fail")," ")}}function fe(n,i){if(1&n&&(e.ynx(0),e.YNc(1,ve,4,5,"ng-container",102),e.BQk()),2&n){const t=e.oxw().$implicit,o=e.MAs(20);e.xp6(1),e.Q6J("ngIf",null!=t.success)("ngIfElse",o)}}function be(n,i){1&n&&e._uU(0,"\xa0")}const Ze=function(n){return{width:"auto","background-color":n}};function he(n,i){if(1&n&&(e.TgZ(0,"tr",70)(1,"td",98),e._UZ(2,"p-tableCheckbox",74),e.qZA(),e.TgZ(3,"td",99),e._UZ(4,"img",75),e.qZA(),e.TgZ(5,"td",95),e._uU(6),e.qZA(),e.TgZ(7,"td",95),e._uU(8),e.qZA(),e.TgZ(9,"td",95),e._uU(10),e.qZA(),e.TgZ(11,"td",95),e._uU(12),e.qZA(),e.TgZ(13,"td",100),e._uU(14),e.ALo(15,"translate"),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"td",101),e.YNc(18,fe,2,2,"ng-container",102),e.YNc(19,be,1,0,"ng-template",null,103,e.W1O),e.qZA()(),e.TgZ(21,"tr")(22,"td",104),e._uU(23),e.qZA()()),2&n){const t=i.$implicit,o=e.MAs(20),r=e.oxw();let s;e.xp6(2),e.Q6J("value",t),e.xp6(2),e.Q6J("alt",t.enable)("src","Y"===t.enable?"assets/images/icon_green.png":"assets/images/icon_red.png",e.LSH),e.xp6(2),e.Oqu(t.serviceName),e.xp6(2),e.Oqu(t.proxyHostName),e.xp6(2),e.Oqu(t.targetHostName),e.xp6(2),e.Oqu(t.targetPort),e.xp6(2),e.AsE("",t.create?e.lcZ(15,13,"button.create"):""," ",t.update?e.lcZ(16,15,"button.update"):"",""),e.xp6(3),e.Q6J("ngStyle",e.VKq(17,Ze,t.success?"#FAEBD7":"")),e.xp6(1),e.Q6J("ngIf",r.checkImportStatus)("ngIfElse",o),e.xp6(5),e.Oqu(null!==(s=t.errorMessage)&&void 0!==s?s:"\xa0")}}function Te(n,i){if(1&n&&(e.TgZ(0,"tr",106)(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.uIk("colspan",8),e.xp6(1),e.AsE("",e.lcZ(3,3,"row_count"),": ",t.importList.length,"")}}function Ae(n,i){if(1&n&&e.YNc(0,Te,4,5,"tr",105),2&n){const t=e.oxw();e.Q6J("ngIf",t.importList.length>0)}}function Ce(n,i){1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(1),e.uIk("colspan",8),e.xp6(1),e.hij(" ",e.lcZ(3,2,"no_rec")," "))}const xe=function(){return{backgroundColor:"var(--red-300)","border-color":"var(--red-300)"}};function ye(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",107)(1,"button",108),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(130).accept()}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"button",109),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(130).reject()}),e.ALo(4,"translate"),e.qZA()()}2&n&&(e.xp6(1),e.s9C("label",e.lcZ(2,3,"button.confirm")),e.Q6J("ngStyle",e.DdM(7,xe)),e.xp6(2),e.s9C("label",e.lcZ(4,5,"button.cancel")))}const S=function(){return{"word-break":"break-word"}},Ne=function(){return{marginTop:"60px"}},qe=function(){return{width:"50vw"}},Me=[{path:"",component:(()=>{class n extends H.H{constructor(t,o,r,s,c,u,d,m,p){super(t,o),this.messageService=r,this.toolService=s,this.ngxService=c,this.fb=u,this.serverService=d,this.confirmationService=m,this.alertService=p,this.pageNum=1,this.currentTitle=this.title,this.tableData=[],this.selected=[],this.currentAction="",this.importSelected=[],this.checkImportStatus=!1,this.importList=[]}ngOnInit(){this.formEdit=this.fb.group({gRPCProxyMapId:new a.NI(""),serviceName:new a.NI(""),proxyHostName:new a.NI(""),targetHostName:new a.NI(""),targetPort:new a.NI(""),connectTimeoutMs:new a.NI("5000"),sendTimeoutMs:new a.NI("10000"),readTimeoutMs:new a.NI("30000"),secureMode:new a.NI("SECURE"),autoTrustUpstreamCerts:new a.NI("Y"),trustedCertsContent:new a.NI(""),enable:new a.NI("")}),this.formFile=this.fb.group({file:new a.NI,fileName:new a.NI({value:"",disabled:!0})}),this.serverService.queryGrpcService_ignore1298({}).subscribe(t=>{this.tableData=this.toolService.checkDpSuccess(t.ResHeader)?t.RespBody.infoList:[]})}queryGrpcService(){this.selected=[],this.serverService.queryGrpcService({}).subscribe(t=>{this.tableData=this.toolService.checkDpSuccess(t.ResHeader)?t.RespBody.infoList:[]})}headerReturn(){this.changePage("query")}changePage(){var t=this;return(0,v.Z)(function*(o="query",r){var s,c;const d=yield t.toolService.getDict(["button.detail","button.create","button.update","cfm_del","message.delete","message.success"]);switch(t.resetFormValidator(t.formEdit),t.currentAction=o,null===(s=t.secureModeSub)||void 0===s||s.unsubscribe(),t.secureModeSub=void 0,null===(c=t.autotrustCertsSub)||void 0===c||c.unsubscribe(),t.autotrustCertsSub=void 0,o){case"query":t.currentTitle=t.title,t.pageNum=1;break;case"create":t.serverService.createGrpcService_before().subscribe(m=>{var p,g,_,f;t.toolService.checkDpSuccess(m.ResHeader)&&(t.addFormValidator(t.formEdit,m.RespBody.constraints),t.currentTitle+=`> ${d["button.create"]}`,t.pageNum=2,null===(p=t.enable)||void 0===p||p.setValue("N"),null===(g=t.connectTimeoutMs)||void 0===g||g.setValue("5000"),null===(_=t.sendTimeoutMs)||void 0===_||_.setValue("10000"),null===(f=t.readTimeoutMs)||void 0===f||f.setValue("30000"),t.secureMode.setValue("PLAINTEXT"),t.autoTrustUpstreamCerts.setValue("Y"),t.secureModeSub=t.secureMode.valueChanges.subscribe(b=>{t.autoTrustUpstreamCerts.setValue("Y"),t.trustedCertsContent.setValue("")}),t.autotrustCertsSub=t.autoTrustUpstreamCerts.valueChanges.subscribe(b=>{"Y"==b?(t.trustedCertsContent.clearValidators(),t.trustedCertsContent.clearAsyncValidators(),t.trustedCertsContent.setValue(""),t.formEdit.updateValueAndValidity(),t.trustedCertsContent.markAsUntouched(),t.trustedCertsContent.markAsPristine()):(t.trustedCertsContent.addValidators([C.np()]),t.trustedCertsContent.updateValueAndValidity(),t.trustedCertsContent.markAsTouched())}))});break;case"update":t.serverService.updateGrpcService_before().subscribe(m=>{t.toolService.checkDpSuccess(m.ResHeader)&&(t.addFormValidator(t.formEdit,m.RespBody.constraints),t.currentTitle+=`> ${d["button.update"]}`,t.gRPCProxyMapId.setValue(null==r?void 0:r.gRPCProxyMapId),t.serviceName.setValue(null==r?void 0:r.serviceName),t.proxyHostName.setValue(null==r?void 0:r.proxyHostName),t.targetHostName.setValue(null==r?void 0:r.targetHostName),t.targetPort.setValue(null==r?void 0:r.targetPort),t.connectTimeoutMs.setValue(null==r?void 0:r.connectTimeoutMs),t.sendTimeoutMs.setValue(null==r?void 0:r.sendTimeoutMs),t.readTimeoutMs.setValue(null==r?void 0:r.readTimeoutMs),t.enable.setValue(null==r?void 0:r.enable),t.secureMode.setValue(null==r?void 0:r.secureMode),t.trustedCertsContent.setValue(null==r?void 0:r.trustedCertsContent),t.autoTrustUpstreamCerts.setValue(null==r?void 0:r.autoTrustUpstreamCerts),"N"==t.autoTrustUpstreamCerts.value&&t.trustedCertsContent.addValidators([C.np()]),t.selectedItem=r,t.secureModeSub=t.secureMode.valueChanges.subscribe(p=>{t.autoTrustUpstreamCerts.setValue("Y"),t.trustedCertsContent.setValue("")}),t.autotrustCertsSub=t.autoTrustUpstreamCerts.valueChanges.subscribe(p=>{"Y"==p?(t.trustedCertsContent.clearValidators(),t.trustedCertsContent.clearAsyncValidators(),t.trustedCertsContent.setValue(""),t.formEdit.updateValueAndValidity(),t.trustedCertsContent.markAsUntouched(),t.trustedCertsContent.markAsPristine()):(t.trustedCertsContent.addValidators([C.np()]),t.trustedCertsContent.updateValueAndValidity(),t.trustedCertsContent.markAsTouched())}),t.pageNum=2)});break;case"delete":t.confirmationService.confirm({header:" ",message:d.cfm_del,accept:()=>{t.serverService.deleteGrpcService({gRPCProxyMapId:r.gRPCProxyMapId}).subscribe(function(){var m=(0,v.Z)(function*(p){if(t.toolService.checkDpSuccess(p.ResHeader)){const g=["message.delete","message.role_role_mapping","message.success"],_=yield t.toolService.getDict(g);t.messageService.add({severity:"success",summary:`${_["message.delete"]} `,detail:`${_["message.delete"]} ${_["message.success"]}!`}),t.queryGrpcService(),t.changePage("query")}});return function(p){return m.apply(this,arguments)}}())}})}}).apply(this,arguments)}create(){var o,r,s,c,u,d,m,p,t=this;let g={serviceName:null===(o=this.serviceName)||void 0===o?void 0:o.value,proxyHostName:null===(r=this.proxyHostName)||void 0===r?void 0:r.value,targetHostName:null===(s=this.targetHostName)||void 0===s?void 0:s.value,targetPort:null===(c=this.targetPort)||void 0===c?void 0:c.value,connectTimeoutMs:null===(u=this.connectTimeoutMs)||void 0===u?void 0:u.value,sendTimeoutMs:null===(d=this.sendTimeoutMs)||void 0===d?void 0:d.value,readTimeoutMs:null===(m=this.readTimeoutMs)||void 0===m?void 0:m.value,enable:null===(p=this.enable)||void 0===p?void 0:p.value,secureMode:this.secureMode.value,autoTrustUpstreamCerts:this.autoTrustUpstreamCerts.value};"N"===g.autoTrustUpstreamCerts&&(g.trustedCertsContent=this.trustedCertsContent.value),this.serverService.createGrpcService(g).subscribe(function(){var _=(0,v.Z)(function*(f){if(t.toolService.checkDpSuccess(f.ResHeader)){const b=["message.create","message.success"],h=yield t.toolService.getDict(b);t.messageService.add({severity:"success",summary:`${h["message.create"]}`,detail:`${h["message.create"]} ${h["message.success"]}!`}),t.queryGrpcService(),t.changePage("query")}});return function(f){return _.apply(this,arguments)}}())}update(){var o,r,s,c,u,d,m,p,g,t=this;let _={gRPCProxyMapId:null===(o=this.gRPCProxyMapId)||void 0===o?void 0:o.value,serviceName:null===(r=this.serviceName)||void 0===r?void 0:r.value,proxyHostName:null===(s=this.proxyHostName)||void 0===s?void 0:s.value,targetHostName:null===(c=this.targetHostName)||void 0===c?void 0:c.value,targetPort:null===(u=this.targetPort)||void 0===u?void 0:u.value,connectTimeoutMs:String(null===(d=this.connectTimeoutMs)||void 0===d?void 0:d.value),sendTimeoutMs:String(null===(m=this.sendTimeoutMs)||void 0===m?void 0:m.value),readTimeoutMs:String(null===(p=this.readTimeoutMs)||void 0===p?void 0:p.value),enable:null===(g=this.enable)||void 0===g?void 0:g.value,secureMode:this.secureMode.value,autoTrustUpstreamCerts:this.autoTrustUpstreamCerts.value,trustedCertsContent:"N"===this.autoTrustUpstreamCerts.value?this.trustedCertsContent.value:""};this.serverService.updateGrpcService(_).subscribe(function(){var f=(0,v.Z)(function*(b){if(t.toolService.checkDpSuccess(b.ResHeader)){const h=["message.update","message.success"],y=yield t.toolService.getDict(h);t.messageService.add({severity:"success",summary:`${y["message.update"]}`,detail:`${y["message.update"]} ${y["message.success"]}!`}),t.queryGrpcService(),t.changePage("query")}});return function(b){return f.apply(this,arguments)}}())}updateStatus(t="N"){var o=this;this.serverService.batchUpdateProxyStatus({enable:t,proxyIds:this.selected.map(r=>r.gRPCProxyMapId)}).subscribe(function(){var r=(0,v.Z)(function*(s){if(o.toolService.checkDpSuccess(s.ResHeader)){const c=["message.update","message.success"],u=yield o.toolService.getDict(c);o.messageService.add({severity:"success",summary:`${u["message.update"]}`,detail:`${u["message.update"]} ${u["message.success"]}!`}),o.queryGrpcService(),o.changePage("query")}});return function(s){return r.apply(this,arguments)}}())}export(){let t=this.selected.map(o=>o.gRPCProxyMapId);this.ngxService.start(),this.serverService.exportGrpcSetting(t).subscribe(o=>{if(this.ngxService.stop(),this.toolService.checkDpSuccess(o.ResHeader)){const r=new Blob([JSON.stringify(o.RespBody.data,null,2)],{type:"application/json"});(0,L.saveAs)(r,o.RespBody.fileName||"grpc_export_file.json")}})}changePageImport(){var t=this;return(0,v.Z)(function*(){const r=yield t.toolService.getDict(["button.import"]);t.currentTitle=`${t.title} > ${r["button.import"]}`,t.resetFile(),t.pageNum=3})()}uploadFile(){var t=this;this.checkImportStatus=!1;let o=new FileReader;o.onloadend=()=>{this.serverService.parseGrpcSetting(null,this.importFile).subscribe(function(){var r=(0,v.Z)(function*(s){if(t.toolService.checkDpSuccess(s.ResHeader)){t.importSelected=[],t.importList=s.RespBody;const c=["uploading","upload_result","message.success"],u=yield t.toolService.getDict(c);t.messageService.add({severity:"success",summary:u.upload_result,detail:`${u["message.success"]}!`})}});return function(s){return r.apply(this,arguments)}}())},o.readAsText(this.importFile)}changeFile(t){this.importList=[],this.importSelected=[],this.checkImportStatus=!1,0!=t.target.files.length?(this.importFile=t.target.files[0],this.fileName.setValue(t.target.files[0].name)):this.resetFile()}resetFile(){this.importFile=void 0,this.importList=[],this.file.reset(),this.fileName.setValue(""),$("#file").val("")}openFileBrowser(){$("#file").click()}import(){var t=this;this.serverService.importGrpcSetting(this.importSelected).subscribe(function(){var o=(0,v.Z)(function*(r){if(t.toolService.checkDpSuccess(r.ResHeader)){t.checkImportStatus=!0,t.importList.forEach(u=>{r.RespBody.forEach(d=>{u.uuid==d.uuid&&(u.success=d.success,u.errorMessage=d.errorMessage)})}),t.importSelected=[];const s=["button.import","message.success","message.fail"],c=yield t.toolService.getDict(s);r.RespBody.every(u=>u.success)?t.messageService.add({severity:"success",summary:`${c["button.import"]} ${c["message.success"]}`}):t.messageService.add({severity:"error",summary:`${c["button.import"]} ${c["message.fail"]}`}),t.queryGrpcService()}});return function(r){return o.apply(this,arguments)}}())}connectionTest(){this.serverService.testConnGrpc({targetHostName:this.targetHostName.value,targetPort:this.targetPort.value,connectTimeoutMs:this.connectTimeoutMs.value,secureMode:this.secureMode.value,autoTrustUpstreamCerts:this.autoTrustUpstreamCerts.value,trustedCertsContent:"N"===this.autoTrustUpstreamCerts.value?this.trustedCertsContent.value:""}).subscribe(o=>{var r,s;this.toolService.checkDpSuccess(o.ResHeader)&&(o.RespBody.isConn?this.alertService.ok("Connect Success",null!==(r=o.RespBody.errMsg)&&void 0!==r?r:"",M.NK.success):this.alertService.ok("Connect Fail",null!==(s=o.RespBody.errMsg)&&void 0!==s?s:"",M.NK.error))})}get gRPCProxyMapId(){return this.formEdit.get("gRPCProxyMapId")}get serviceName(){return this.formEdit.get("serviceName")}get proxyHostName(){return this.formEdit.get("proxyHostName")}get targetHostName(){return this.formEdit.get("targetHostName")}get targetPort(){return this.formEdit.get("targetPort")}get connectTimeoutMs(){return this.formEdit.get("connectTimeoutMs")}get sendTimeoutMs(){return this.formEdit.get("sendTimeoutMs")}get readTimeoutMs(){return this.formEdit.get("readTimeoutMs")}get enable(){return this.formEdit.get("enable")}get secureMode(){return this.formEdit.get("secureMode")}get trustedCertsContent(){return this.formEdit.get("trustedCertsContent")}get autoTrustUpstreamCerts(){return this.formEdit.get("autoTrustUpstreamCerts")}get file(){return this.formFile.get("file")}get fileName(){return this.formFile.get("fileName")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A.gz),e.Y36(I.W),e.Y36(Z.ez),e.Y36(J.g),e.Y36(R.LA),e.Y36(a.qu),e.Y36(Y.N),e.Y36(Z.YP),e.Y36(V.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-ac0320"]],features:[e._Bn([Z.ez,Z.YP,P.s]),e.qOj],decls:132,vars:71,consts:[[3,"title","isDefault","headerReturn"],[3,"hidden"],["styleClass","p-datatable-striped","responsiveLayout","scroll",3,"value","selection","selectionChange"],["pTemplate","caption"],["pTemplate","header","selectionMode","multiple"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"formGroup"],["class","form-group row",4,"ngIf"],[1,"form-group","row"],[1,"col"],["id","enable_label",1,"control-label"],[1,"p-form-check-line","form-group"],[1,"p-form-check"],["formControlName","enable","value","Y","inputId","enableY"],["for","enableY",1,"ms-2","mb-0"],["formControlName","enable","value","N","inputId","enableN"],["for","enableN",1,"ms-2","mb-0"],[1,"col-6"],["id","serviceName_label",1,"control-label"],["type","text","id","serviceName","formControlName","serviceName",1,"form-control"],["class","text-danger",4,"ngIf"],[1,"col-3"],["id","targetHostName_label",1,"control-label"],["type","text","id","targetHostName","formControlName","targetHostName","placeholder","IP address or Hostname",1,"form-control"],["id","targetPort_label",1,"control-label"],["type","text","id","targetPort","formControlName","targetPort",1,"form-control"],[1,"col-6","row"],[1,"col-4"],["id","",1,"control-label","fw-bold","required"],["formControlName","secureMode","value","SECURE","inputId","secureModeY"],["for","secureModeY",1,"ms-2","mb-0"],["formControlName","secureMode","value","PLAINTEXT","inputId","secureModeN"],["for","secureModeN",1,"ms-2","mb-0"],["class","col-4",4,"ngIf"],["class","col-12","style","display:block",4,"ngIf"],["id","proxyHostName_label",1,"control-label"],["type","text","id","proxyHostName","formControlName","proxyHostName","placeholder","Hostname or Domain name",1,"form-control",3,"readonly"],["id","connectTimeoutMs_label",1,"control-label"],[1,"d-flex","align-items-center"],["type","number","id","connectTimeoutMs","formControlName","connectTimeoutMs",1,"form-control"],[1,"ms-1"],["hidden","",1,"col-4"],["id","sendTimeoutMs_label",1,"control-label"],["type","number","id","sendTimeoutMs","formControlName","sendTimeoutMs",1,"form-control"],["id","readTimeoutMs_label",1,"control-label"],["type","number","id","readTimeoutMs","formControlName","readTimeoutMs",1,"form-control"],[1,"form-group","row","mt-3"],[1,"col-12","col-xl-12","col-lg-12"],["type","button","class","btn tpi-btn tpi-second float-start me-3",3,"disabled","click",4,"ngIf"],["type","button","class","btn tpi-btn tpi-primary float-start me-3",3,"disabled","click",4,"ngIf"],["type","button",1,"btn","tpi-btn","tpi-night","float-start","me-3",3,"click"],["type","button",1,"btn","tpi-btn","tpi-primary","float-start","me-3",3,"click"],[1,"ui-inputgroup"],["type","file","id","file","accept",".json","formControlName","file",2,"display","none",3,"change"],["type","text","formControlName","fileName",1,"form-control",3,"placeholder"],["pButton","","type","button","icon","pi pi-file",1,"ms-1","tpi-primary",3,"click"],[1,"col-1"],["type","button",1,"btn","tpi-btn","tpi-primary","float-start",3,"disabled","click"],["pTemplate","colgroup"],["pTemplate","footer"],["position","top-left"],["icon","pi pi-exclamation-triangle","styleClass","cHeader cContent cIcon"],["cd",""],[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex"],["type","button",1,"btn","tpi-primary","tpi-btn","me-1",3,"disabled","click"],["type","button",1,"btn","tpi-primary","tpi-btn",3,"disabled","click"],["type","button",1,"btn","tpi-btn","tpi-primary","me-1",3,"click"],["type","button",1,"btn","tpi-btn","tpi-second",3,"click"],[2,"text-align","center"],[2,"width","2.25em"],[2,"width","70px","white-space","nowrap"],[2,"width","120px"],[3,"value"],[2,"width","20px","height","20px",3,"alt","src"],["pButton","","pRipple","","type","button","icon","fa fa-edit","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-plain",3,"pTooltip","click"],["pButton","","pRipple","","type","button","icon","fa fa-trash-alt","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-plain",3,"pTooltip","click"],["id","gRPCProxyMapId_label",1,"control-label"],["type","text","id","gRPCProxyMapId","formControlName","gRPCProxyMapId","readonly","",1,"form-control"],[1,"text-danger"],[1,"form-text"],[1,"p-form-check-line"],["inputId","autoTrustUpstreamCerts_label","formControlName","autoTrustUpstreamCerts",3,"binary","trueValue","falseValue"],["for","autoTrustUpstreamCerts_label",1,"control-label","mb-0","ms-2"],[1,"col-12",2,"display","block"],["id","targetHostName_label",1,"control-label","fw-bold","required"],["tooltipStyleClass","tooltip-custom-w",1,"far","fa-question-circle","tip","ms-2",3,"pTooltip","escape"],["rows","8","id","trustedCertsContent","formControlName","trustedCertsContent","pInputTextarea","",2,"width","100%"],["type","button",1,"btn","tpi-btn","tpi-second","float-start","me-3",3,"disabled","click"],["type","button",1,"btn","tpi-btn","tpi-primary","float-start","me-3",3,"disabled","click"],[1,"ui-helper-clearfix"],["type","button",1,"btn","tpi-btn","tpi-primary","float-start","me-1",3,"disabled","click"],["rowspan","2","scope","col",2,"width","2.25em"],["rowspan","2",2,"width","70px","white-space","nowrap"],["rowspan","2"],["rowspan","1","scope","col"],["rowspan","1","colspan","2","scope","col"],["rowspan","2",2,"width","2.25em"],["rowspan","2",2,"text-align","center"],["rowspan","1"],["rowspan","1",3,"ngStyle"],[4,"ngIf","ngIfElse"],["empty",""],["rowspan","1","colspan","2"],["style","color: #b7b7b7;",4,"ngIf"],[2,"color","#b7b7b7"],[1,"row",2,"justify-content","center"],["type","button","pButton","","icon","pi pi-check",3,"ngStyle","label","click"],["type","button","pButton","","icon","pi pi-times",1,"p-button-secondary",3,"label","click"]],template:function(t,o){1&t&&(e.TgZ(0,"app-container",0),e.NdJ("headerReturn",function(){return o.headerReturn()}),e.TgZ(1,"div",1)(2,"p-table",2),e.NdJ("selectionChange",function(s){return o.selected=s}),e.YNc(3,z,18,18,"ng-template",3),e.YNc(4,D,21,18,"ng-template",4),e.YNc(5,K,18,13,"ng-template",5),e.YNc(6,W,4,4,"ng-template",6),e.qZA()(),e.TgZ(7,"div",1)(8,"form",7),e.YNc(9,ee,5,0,"div",8),e.TgZ(10,"div",9)(11,"div",10)(12,"label",11),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",12),e.ynx(16),e.TgZ(17,"div",13),e._UZ(18,"p-radioButton",14),e.TgZ(19,"label",15),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"div",13),e._UZ(23,"p-radioButton",16),e.TgZ(24,"label",17),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e.BQk(),e.qZA()()(),e.TgZ(27,"div",9)(28,"div",18)(29,"label",19),e._uU(30),e.ALo(31,"translate"),e.qZA(),e._UZ(32,"input",20),e.YNc(33,te,4,3,"div",21),e.qZA()(),e.TgZ(34,"div",9)(35,"div",22)(36,"label",23),e._uU(37),e.ALo(38,"translate"),e.qZA(),e._UZ(39,"input",24),e.YNc(40,oe,4,3,"div",21),e.qZA(),e.TgZ(41,"div",22)(42,"label",25),e._uU(43),e.ALo(44,"translate"),e.qZA(),e._UZ(45,"input",26),e.YNc(46,ne,4,3,"div",21),e.qZA()(),e.TgZ(47,"div",9)(48,"div",27)(49,"div",28)(50,"label",29),e._uU(51),e.ALo(52,"translate"),e.qZA(),e.TgZ(53,"div",12),e.ynx(54),e.TgZ(55,"div",13),e._UZ(56,"p-radioButton",30),e.TgZ(57,"label",31),e._uU(58,"gRPCS"),e.qZA()(),e.TgZ(59,"div",13),e._UZ(60,"p-radioButton",32),e.TgZ(61,"label",33),e._uU(62,"gRPC"),e.qZA()(),e.BQk(),e.qZA()()()(),e.TgZ(63,"div",9),e.YNc(64,re,7,6,"div",34),e.YNc(65,se,13,19,"div",35),e.YNc(66,ie,4,3,"div",21),e.qZA(),e.TgZ(67,"div",9)(68,"div",18)(69,"label",36),e._uU(70,"Proxy hostname/domain name"),e.qZA(),e._UZ(71,"input",37),e.YNc(72,le,4,3,"div",21),e.qZA()(),e.TgZ(73,"div",9)(74,"div",22)(75,"label",38),e._uU(76,"Connect timeout"),e.qZA(),e.TgZ(77,"div",39),e._UZ(78,"input",40),e.TgZ(79,"small",41),e._uU(80,"ms"),e.qZA()(),e.YNc(81,ae,4,3,"div",21),e.qZA(),e.TgZ(82,"div",42)(83,"label",43),e._uU(84,"Send timeout"),e.qZA(),e.TgZ(85,"div",39),e._UZ(86,"input",44),e.TgZ(87,"small",41),e._uU(88,"ms"),e.qZA()(),e.YNc(89,ce,4,3,"div",21),e.qZA(),e.TgZ(90,"div",42)(91,"label",45),e._uU(92,"Read timeout"),e.qZA(),e.TgZ(93,"div",39),e._UZ(94,"input",46),e.TgZ(95,"small",41),e._uU(96,"ms"),e.qZA()(),e.YNc(97,ue,4,3,"div",21),e.qZA()(),e.TgZ(98,"div",47)(99,"div",48),e.YNc(100,pe,3,4,"button",49),e.YNc(101,de,3,4,"button",50),e.TgZ(102,"button",51),e.NdJ("click",function(){return o.connectionTest()}),e._uU(103),e.ALo(104,"translate"),e.qZA(),e.TgZ(105,"button",52),e.NdJ("click",function(){return o.changePage("query")}),e._uU(106),e.ALo(107,"translate"),e.qZA()()()()(),e.TgZ(108,"div",1)(109,"form",7)(110,"div",9)(111,"div",22)(112,"div",53)(113,"input",54),e.NdJ("change",function(s){return o.changeFile(s)}),e.qZA(),e._UZ(114,"input",55),e.ALo(115,"translate"),e.TgZ(116,"button",56),e.NdJ("click",function(){return o.openFileBrowser()}),e.qZA()()(),e.TgZ(117,"div",57)(118,"button",58),e.NdJ("click",function(){return o.uploadFile()}),e._uU(119),e.ALo(120,"translate"),e.qZA()()()(),e.TgZ(121,"p-table",2),e.NdJ("selectionChange",function(s){return o.importSelected=s}),e.YNc(122,me,4,4,"ng-template",3),e.YNc(123,ge,0,0,"ng-template",59),e.YNc(124,_e,28,24,"ng-template",4),e.YNc(125,he,24,19,"ng-template",5),e.YNc(126,Ae,1,1,"ng-template",60),e.YNc(127,Ce,4,4,"ng-template",6),e.qZA()()(),e._UZ(128,"p-toast",61),e.TgZ(129,"p-confirmDialog",62,63),e.YNc(131,ye,5,8,"ng-template",60),e.qZA()),2&t&&(e.Q6J("title",o.currentTitle)("isDefault",1==o.pageNum),e.xp6(1),e.Q6J("hidden",1!=o.pageNum),e.xp6(1),e.Akn(e.DdM(67,S)),e.Q6J("value",o.tableData)("selection",o.selected),e.xp6(5),e.Q6J("hidden",2!=o.pageNum),e.xp6(1),e.Q6J("formGroup",o.formEdit),e.xp6(1),e.Q6J("ngIf","update"==o.currentAction),e.xp6(4),e.Oqu(e.lcZ(14,45,"status")),e.xp6(7),e.Oqu(e.lcZ(21,47,"button.enable")),e.xp6(5),e.Oqu(e.lcZ(26,49,"button.disable")),e.xp6(5),e.Oqu(e.lcZ(31,51,"grpc.tar_serv")),e.xp6(3),e.Q6J("ngIf",(null==o.serviceName?null:o.serviceName.invalid)&&((null==o.serviceName?null:o.serviceName.dirty)||(null==o.serviceName?null:o.serviceName.touched))),e.xp6(4),e.Oqu(e.lcZ(38,53,"grpc.tar_host")),e.xp6(3),e.Q6J("ngIf",(null==o.targetHostName?null:o.targetHostName.invalid)&&((null==o.targetHostName?null:o.targetHostName.dirty)||(null==o.targetHostName?null:o.targetHostName.touched))),e.xp6(3),e.Oqu(e.lcZ(44,55,"grpc.tar_port")),e.xp6(3),e.Q6J("ngIf",(null==o.targetPort?null:o.targetPort.invalid)&&((null==o.targetPort?null:o.targetPort.dirty)||(null==o.targetPort?null:o.targetPort.touched))),e.xp6(5),e.hij("",e.lcZ(52,57,"grpc.tar_host")," Protocol"),e.xp6(13),e.Q6J("ngIf","SECURE"===o.secureMode.value),e.xp6(1),e.Q6J("ngIf","N"===o.autoTrustUpstreamCerts.value),e.xp6(1),e.Q6J("ngIf",(null==o.trustedCertsContent?null:o.trustedCertsContent.invalid)&&((null==o.trustedCertsContent?null:o.trustedCertsContent.dirty)||(null==o.trustedCertsContent?null:o.trustedCertsContent.touched))),e.xp6(5),e.Q6J("readonly","update"==o.currentAction),e.xp6(1),e.Q6J("ngIf",(null==o.proxyHostName?null:o.proxyHostName.invalid)&&((null==o.proxyHostName?null:o.proxyHostName.dirty)||(null==o.proxyHostName?null:o.proxyHostName.touched))),e.xp6(9),e.Q6J("ngIf",(null==o.connectTimeoutMs?null:o.connectTimeoutMs.invalid)&&((null==o.connectTimeoutMs?null:o.connectTimeoutMs.dirty)||(null==o.connectTimeoutMs?null:o.connectTimeoutMs.touched))),e.xp6(8),e.Q6J("ngIf",(null==o.sendTimeoutMs?null:o.sendTimeoutMs.invalid)&&((null==o.sendTimeoutMs?null:o.sendTimeoutMs.dirty)||(null==o.sendTimeoutMs?null:o.sendTimeoutMs.touched))),e.xp6(8),e.Q6J("ngIf",(null==o.readTimeoutMs?null:o.readTimeoutMs.invalid)&&((null==o.readTimeoutMs?null:o.readTimeoutMs.dirty)||(null==o.readTimeoutMs?null:o.readTimeoutMs.touched))),e.xp6(3),e.Q6J("ngIf","create"==o.currentAction),e.xp6(1),e.Q6J("ngIf","update"==o.currentAction),e.xp6(2),e.hij(" ",e.lcZ(104,59,"button.connect_test")," "),e.xp6(3),e.Oqu(e.lcZ(107,61,"button.return_to_list")),e.xp6(2),e.Q6J("hidden",3!=o.pageNum),e.xp6(1),e.Q6J("formGroup",o.formFile),e.xp6(5),e.s9C("placeholder",e.lcZ(115,63,"chs_json_file")),e.xp6(4),e.Q6J("disabled",!o.file.value),e.xp6(1),e.hij(" ",e.lcZ(120,65,"button.upload")," "),e.xp6(2),e.Akn(e.DdM(68,S)),e.Q6J("value",o.importList)("selection",o.importSelected),e.xp6(7),e.Akn(e.DdM(69,Ne)),e.xp6(1),e.Akn(e.DdM(70,qe)))},directives:[O.e,x.iA,Z.jx,x.Mo,x.UA,Q.Hq,E.u,a._Y,a.JL,a.sg,T.O5,a.Fj,a.JJ,a.u,F.EU,B.XZ,w.g,a.wV,T.PC,j.FN,G.Q],pipes:[X.X$],styles:[""]}),n})(),canActivate:[q.u6]}];let Se=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[A.Bz.forChild(Me)],A.Bz]}),n})(),Ue=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[q.u6],imports:[[T.ez,Se,U.W,k.m,a.UX,a.u5]]}),n})()}}]);