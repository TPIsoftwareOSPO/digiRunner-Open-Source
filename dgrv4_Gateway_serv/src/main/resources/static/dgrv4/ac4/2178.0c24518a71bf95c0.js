"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[2178],{2178:(Z,f,i)=>{i.r(f),i.d(f,{Ac0104Module:()=>it});var a=i(48750),A=i(31890),_=i(69808),p=i(86347),g=i(99291),C=i(15861),x=i(14525),c=i(93075),d=i(1694),t=i(87587);let l=(()=>{class n{transform(e){if("[object String]"!=Object.prototype.toString.call(e))return e;switch(e){case"green":return"assets/images/icon_green.png";case"red":return"assets/images/icon_red.png";case"yellow":return"assets/images/icon_yellow.png";default:return""}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"api_status",type:n,pure:!0}),n})();var v=i(71764);let m=(()=>{class n{transform(e){if(e)return v(e).format("YYYY-MM-DD HH:mm:ss.SSS")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"utc_datetime_format",type:n,pure:!0}),n})();var D=i(56435),E=i(4516),y=i(59783),b=i(38441),M=i(41313),U=i(63710),L=i(75652),P=i(14036),S=i(23099),J=i(17773),Y=i(51062);function F(n,r){if(1&n&&(t.TgZ(0,"div",17)(1,"small",18),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,1,e.dateS.errors.required))}}function B(n,r){if(1&n&&(t.TgZ(0,"div",17)(1,"small",18),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,1,e.dateE.errors.required))}}function Q(n,r){if(1&n&&(t.TgZ(0,"div",17)(1,"small",18),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,1,e.indexName.errors.required))}}function k(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",26)(1,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateIndexStatus(1)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).updateIndexStatus(0)}),t._uU(5),t.ALo(6,"translate"),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",0==e.selected.length),t.xp6(1),t.Oqu(t.lcZ(3,4,"button.on")),t.xp6(2),t.Q6J("disabled",0==e.selected.length),t.xp6(1),t.Oqu(t.lcZ(6,6,"button.close"))}}function R(n,r){if(1&n&&t._UZ(0,"col",30),2&n){const e=r.$implicit,o=t.oxw(3);t.Q6J("ngStyle",o.colStyle(e))}}function j(n,r){if(1&n&&(t.TgZ(0,"colgroup"),t._UZ(1,"col",28),t.YNc(2,R,1,1,"col",29),t.qZA()),2&n){const e=r.$implicit;t.xp6(2),t.Q6J("ngForOf",e)}}function G(n,r){if(1&n&&(t.TgZ(0,"th",33),t._uU(1),t.qZA()),2&n){const e=r.$implicit,o=t.oxw(3);t.Q6J("pSortableColumn",e.field)("ngStyle",o.colStyle(e)),t.xp6(1),t.hij(" ",e.header," ")}}function H(n,r){if(1&n&&(t.TgZ(0,"tr",31)(1,"th",28),t._UZ(2,"p-tableHeaderCheckbox"),t.qZA(),t.YNc(3,G,2,3,"th",32),t.qZA()),2&n){const e=r.$implicit;t.xp6(3),t.Q6J("ngForOf",e)}}function $(n,r){if(1&n&&t._UZ(0,"img",37),2&n){const e=t.oxw().$implicit,o=t.oxw().$implicit,s=t.oxw(2);t.Q6J("src",e.type.transform(s.transformData(o[e.field])),t.LSH)}}function q(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw().$implicit,s=t.oxw(2);t.xp6(1),t.Oqu(e.type?e.type.transform(o[e.field]):s.transformData(o[e.field]))}}function W(n,r){if(1&n&&(t.TgZ(0,"td",30),t.YNc(1,$,1,1,"img",35),t.YNc(2,q,2,1,"span",36),t.qZA()),2&n){const e=r.$implicit,o=t.oxw(3);t.Q6J("ngStyle",o.colStyle(e)),t.xp6(1),t.Q6J("ngIf","health"===e.field),t.xp6(1),t.Q6J("ngIf","health"!=e.field)}}function K(n,r){if(1&n&&(t.TgZ(0,"tr",31)(1,"td"),t._UZ(2,"p-tableCheckbox",34),t.qZA(),t.YNc(3,W,3,3,"td",29),t.qZA()),2&n){const e=r.$implicit,o=r.columns;t.xp6(2),t.Q6J("value",e),t.xp6(1),t.Q6J("ngForOf",o)}}function z(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td")(2,"span"),t._uU(3),t.ALo(4,"translate"),t.qZA()()()),2&n){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.uIk("colspan",e.length+1),t.xp6(2),t.AsE("",t.lcZ(4,3,"row_count"),": ",o.rowcount,"")}}function V(n,r){if(1&n&&t.YNc(0,z,5,5,"tr",36),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.rowcount)}}function X(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const e=r.$implicit;t.xp6(1),t.uIk("colspan",e.length+1),t.xp6(1),t.hij(" ",t.lcZ(3,2,"no_rec")," ")}}const tt=function(){return{"word-wrap":"break-word"}};function et(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"p-table",19),t.NdJ("selectionChange",function(s){return t.CHM(e),t.oxw().selected=s}),t.YNc(1,k,7,8,"ng-template",20),t.YNc(2,j,3,1,"ng-template",21),t.YNc(3,H,4,1,"ng-template",22),t.YNc(4,K,4,2,"ng-template",23),t.YNc(5,V,1,1,"ng-template",24),t.YNc(6,X,4,4,"ng-template",25),t.qZA()}if(2&n){const e=t.oxw();t.Akn(t.DdM(5,tt)),t.Q6J("columns",e.cols)("value",e.data)("selection",e.selected)}}const N=function(){return{width:"95%"}},O=function(){return{width:"100%"}},nt=function(){return{marginTop:"60px"}},ot=[{path:"",component:(()=>{class n extends x.H{constructor(e,o,s,u,h,w,I,T,rt){super(e,o),this.fb=s,this.tool=u,this.idxStat=h,this.datetime_format=w,this.messageService=I,this.ngxService=T,this.serverService=rt,this.dateSmaxDate=new Date,this.dateEminDate=new Date,this.indexs=[],this.cols=[],this.data=new Array,this.rowcount=0,this.selected=new Array,this.form=this.fb.group({dateS:new c.NI("",[d.np()]),timePickerS:new c.NI({hour:0,minute:0}),dateE:new c.NI("",[d.np()]),timePickerE:new c.NI({hour:0,minute:0}),indexName:new c.NI(null,[d.np()])})}ngOnInit(){this.cols=[{field:"index",header:"Name"},{field:"health",header:"Health",type:this.idxStat},{field:"status",header:"Status"},{field:"pri",header:"Primaries"},{field:"docs.count",header:"Docs Count"},{field:"ss",header:"Storage Size"},{field:"creation.date.string",header:"Create Time",type:this.datetime_format}],this.serverService.queryAllIndex({}).subscribe(u=>{if(this.tool.checkDpSuccess(u.ResHeader)&&u.RespBody.indexList)for(let h of u.RespBody.indexList)this.indexs.push({label:h,value:h})});let o=this.route.snapshot.data,s=new Date;if(o.data&&o.data.fulltext){let u=this.tool.addDay(s,-7);this.form.get("dateS").setValue(u),this.form.get("dateE").setValue(s)}else{let u=new Date;u.setHours(0,0,0,0),this.form.get("dateS").setValue(this.tool.addDay(u,-1)),this.form.get("dateE").setValue(this.tool.addDay(u,1))}this.form.get("dateS").valueChanges.subscribe(u=>{this.dateEminDate=new Date(u)}),this.form.get("dateE").valueChanges.subscribe(u=>{this.dateSmaxDate=new Date(u)})}submitForm(){this.ngxService.start(),this.data=[],this.selected=[],this.rowcount=this.data.length;let e={timeS:this.tool.formateDate(this.tool.addDay(this.dateS.value,-1)),timeE:this.tool.formateDate(this.dateE.value),idxName:this.indexName.value?this.indexName.value:""};this.serverService.getIndex(e).subscribe(o=>{var s;this.tool.checkDpSuccess(o.ResHeader)&&(this.data=null!==(s=o.RespBody.listObject)&&void 0!==s?s:[],this.rowcount=this.data.length),this.ngxService.stop()})}updateIndexStatus(e){var o=this;this.ngxService.start();let s=[];this.selected.map(h=>{s.push(h.index)});let u={indexList:s,isOpen:this.tool.Base64Encoder(this.tool.BcryptEncoder(JSON.stringify(e)))+","+this.isOpen(e)};this.serverService.updateIndexOpenOrClose(u).subscribe(function(){var h=(0,C.Z)(function*(w){const T=yield o.tool.getDict(["message.update","message.success"]);o.messageService.add({severity:"success",summary:`${T["message.update"]} Index Status`,detail:`${T["message.update"]} ${T["message.success"]}`}),o.submitForm()});return function(w){return h.apply(this,arguments)}}())}onClearClick(e){this.form.get(e).setErrors({error:"required"})}onTodayClick(e){this.form.get(e).setValue(new Date)}colStyle(e){switch(e.field){case"creation.date.string":case"index":return{width:"100px"};default:return{width:"50px"}}}transformData(e){return"string"!=typeof e?"":e}isOpen(e){return 0==e?"1":1==e?"0":""}get dateS(){return this.form.get("dateS")}get timePickerS(){return this.form.get("timePickerS")}get dateE(){return this.form.get("dateE")}get timePickerE(){return this.form.get("timePickerE")}get indexName(){return this.form.get("indexName")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.gz),t.Y36(D.W),t.Y36(c.qu),t.Y36(E.g),t.Y36(l),t.Y36(m),t.Y36(y.ez),t.Y36(b.LA),t.Y36(M.N))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ac0104"]],features:[t._Bn([l,m]),t.qOj],decls:28,vars:40,consts:[[3,"title"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"col-8"],[1,"control-label","required"],[1,"row"],[1,"col-6"],["formControlName","dateS","dateFormat","yy-mm-dd","showTime","true","showButtonBar","true","baseZIndex","2000","appendTo","body",3,"inputStyle","maxDate","showIcon","onClearClick","onTodayClick"],["class","text-danger",4,"ngIf"],["formControlName","dateE","dateFormat","yy-mm-dd","showTime","true","showButtonBar","true","appendTo","body",3,"inputStyle","showIcon","minDate","onClearClick","onTodayClick"],[1,"col-4"],["for","indexName",1,"control-label","required"],["id","indexName","formControlName","indexName",3,"showClear","filter","options","placeholder"],[1,"col-12","col-xl-3"],["type","submit",1,"btn","tpi-btn","tpi-primary","loat-left",3,"disabled"],["styleClass","p-datatable-striped","responsiveLayout","scroll",3,"columns","value","selection","style","selectionChange",4,"ngIf"],["position","top-left"],[1,"text-danger"],[1,"form-text"],["styleClass","p-datatable-striped","responsiveLayout","scroll",3,"columns","value","selection","selectionChange"],["pTemplate","caption"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],[1,"ui-helper-clearfix"],["type","button",1,"btn","tpi-btn","tpi-primary","float-start","me-1",3,"disabled","click"],[2,"width","2.25em"],[3,"ngStyle",4,"ngFor","ngForOf"],[3,"ngStyle"],[2,"text-align","center"],[3,"pSortableColumn","ngStyle",4,"ngFor","ngForOf"],[3,"pSortableColumn","ngStyle"],[3,"value"],["style","width: 20px;height: 20px;",3,"src",4,"ngIf"],[4,"ngIf"],[2,"width","20px","height","20px",3,"src"]],template:function(e,o){1&e&&(t.TgZ(0,"app-container",0)(1,"form",1),t.NdJ("ngSubmit",function(){return o.submitForm()}),t.TgZ(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"div",5)(8,"div",6)(9,"p-calendar",7),t.NdJ("onClearClick",function(){return o.onClearClick("dateS")})("onTodayClick",function(){return o.onTodayClick("dateS")}),t.qZA(),t.YNc(10,F,4,3,"div",8),t.qZA(),t.TgZ(11,"div",6)(12,"p-calendar",9),t.NdJ("onClearClick",function(){return o.onClearClick("dateE")})("onTodayClick",function(){return o.onTodayClick("dateE")}),t.qZA(),t.YNc(13,B,4,3,"div",8),t.qZA()()(),t.TgZ(14,"div",10)(15,"label",11),t._uU(16,"Index"),t.qZA(),t._UZ(17,"p-dropdown",12),t.ALo(18,"translate"),t.YNc(19,Q,4,3,"div",8),t.qZA()(),t.TgZ(20,"div",2)(21,"div",13)(22,"button",14),t._uU(23),t.ALo(24,"translate"),t.qZA()()()(),t._UZ(25,"hr"),t.YNc(26,et,7,6,"p-table",15),t.qZA(),t._UZ(27,"p-toast",16)),2&e&&(t.Q6J("title",o.title),t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(4),t.Oqu(t.lcZ(6,28,"date_range")),t.xp6(4),t.Akn(t.DdM(34,N)),t.Q6J("inputStyle",t.DdM(35,O))("maxDate",o.dateSmaxDate)("showIcon",!0)("showIcon",!0),t.xp6(1),t.Q6J("ngIf",(null==o.dateS?null:o.dateS.invalid)&&((null==o.dateS?null:o.dateS.dirty)||(null==o.dateS?null:o.dateS.touched))),t.xp6(2),t.Akn(t.DdM(36,N)),t.Q6J("inputStyle",t.DdM(37,O))("showIcon",!0)("minDate",o.dateEminDate),t.xp6(1),t.Q6J("ngIf",(null==o.dateE?null:o.dateE.invalid)&&((null==o.dateE?null:o.dateE.dirty)||(null==o.dateE?null:o.dateE.touched))),t.xp6(4),t.Akn(t.DdM(38,O)),t.s9C("placeholder",t.lcZ(18,30,"plz_chs")),t.Q6J("showClear",!0)("filter",!0)("options",o.indexs),t.xp6(2),t.Q6J("ngIf",(null==o.indexName?null:o.indexName.invalid)&&((null==o.indexName?null:o.indexName.dirty)||(null==o.indexName?null:o.indexName.touched))),t.xp6(3),t.Q6J("disabled",o.form.invalid),t.xp6(1),t.Oqu(t.lcZ(24,32,"button.query")),t.xp6(3),t.Q6J("ngIf",o.cols),t.xp6(1),t.Akn(t.DdM(39,nt)))},directives:[U.e,c._Y,c.JL,c.sg,L.f,c.JJ,c.u,_.O5,P.Lt,S.iA,y.jx,_.sg,_.PC,S.Mo,S.lQ,S.UA,J.FN],pipes:[Y.X$],styles:[""]}),n})(),canActivate:[p.u6]}];let at=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.Bz.forChild(ot)],g.Bz]}),n})(),it=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[p.u6],imports:[[_.ez,at,a.W,A.m,p.DL,p.DL,c.UX,c.u5]]}),n})()},63710:(Z,f,i)=>{i.d(f,{e:()=>c});var a=i(87587),A=i(69808),_=i(51062);function p(d,t){if(1&d&&(a.TgZ(0,"div")(1,"h3",9),a._uU(2),a.ALo(3,"translate"),a.qZA()()),2&d){const l=a.oxw();a.xp6(2),a.Oqu(a.lcZ(3,1,l.title))}}function g(d,t){if(1&d){const l=a.EpF();a.TgZ(0,"div",10)(1,"button",11),a.NdJ("click",function(){return a.CHM(l),a.oxw().return()}),a._UZ(2,"i",12),a._uU(3),a.ALo(4,"translate"),a.qZA(),a.TgZ(5,"span",13),a._uU(6),a.qZA(),a.TgZ(7,"span",14),a._uU(8),a.qZA()()}if(2&d){const l=a.oxw();a.xp6(3),a.hij(" ",a.lcZ(4,3,"button.return_to_list")," "),a.xp6(3),a.hij("",l.getHead()," /"),a.xp6(2),a.Oqu(l.getTail())}}const C=[[["","center-view","center"]],"*"],x=["[center-view=center]","*"];let c=(()=>{class d{constructor(){this.title="",this.isDefault=!0,this.headerReturn=new a.vpe}ngOnInit(){}return(){this.headerReturn.emit(null)}getHead(){const l=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return l.pop(),l.join(" / ")}getTail(){const l=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return l[l.length-1]}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275cmp=a.Xpm({type:d,selectors:[["app-container"]],inputs:{title:"title",isDefault:"isDefault"},outputs:{headerReturn:"headerReturn"},ngContentSelectors:x,decls:11,vars:2,consts:[[1,"container-fluid","h-100"],[1,"row","position-relative",2,"height","calc(100% - 40px - 0.5rem)"],[1,"col"],[2,"margin-bottom","0.5rem"],[4,"ngIf"],["style","text-align: right",4,"ngIf"],[1,"col","d-flex","justify-content-center"],[1,"my-0","mb-2"],[1,"p-2"],["id","content",1,"page-title"],[2,"text-align","right"],["type","button","icon","",1,"btn","float-start","tpi-header-return",3,"click"],[1,"fas","fa-arrow-left",2,"margin-right","5px"],[1,"mb-0",2,"font-size","0.8rem","color","#666464"],[1,"mb-0",2,"font-size","0.8rem","color","#ff6e38","font-weight","bold"]],template:function(l,v){1&l&&(a.F$t(C),a.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),a.YNc(4,p,4,3,"div",4),a.YNc(5,g,9,5,"div",5),a.TgZ(6,"div",6),a.Hsn(7),a.qZA()(),a._UZ(8,"hr",7),a.Hsn(9,1),a._UZ(10,"div",8),a.qZA()()()),2&l&&(a.xp6(4),a.Q6J("ngIf",v.isDefault),a.xp6(1),a.Q6J("ngIf",!v.isDefault))},directives:[A.O5],pipes:[_.X$],styles:[".card.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:400;color:#5a5541}"]}),d})()},92718:(Z,f,i)=>{i.d(f,{u:()=>t});var a=i(54004),A=i(70262),_=i(62843),p=i(87587),g=i(4516),C=i(89709),x=i(99291),c=i(38441),d=i(60991);let t=(()=>{class l{constructor(m,D,E,y,b){this.toolService=m,this.tokenService=D,this.router=E,this.ngxService=y,this.logoutService=b}canActivate(){return this.ngxService.stopAll(),!this.toolService.isTokenExpired()||this.toolService.refreshToken().pipe((0,a.U)(m=>!!m.access_token),(0,A.K)(this.handleError.bind(this)))}handleError(m){return setTimeout(()=>this.logoutService.logout()),(0,_._)(()=>m)}}return l.\u0275fac=function(m){return new(m||l)(p.LFG(g.g),p.LFG(C.B),p.LFG(x.F0),p.LFG(c.LA),p.LFG(d.P))},l.\u0275prov=p.Yz7({token:l,factory:l.\u0275fac}),l})()},86347:(Z,f,i)=>{i.d(f,{DL:()=>a.D,u6:()=>_.u});var a=i(48895),_=(i(45240),i(92718));i(4516)}}]);