"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[9253],{29253:(x,_,n)=>{n.r(_),n.d(_,{Lb0010Module:()=>J});var i=n(99291),d=n(86347),y=n(15861),g=n(14525),u=n(93075),m=n(59783),t=n(87587),a=n(56435),o=n(4516),c=n(71330),l=n(41313),A=n(86518),L=n(38441),D=n(63710),T=n(49603),b=n(69808),Z=n(4119);let B=(()=>{class s{constructor(e){this.fb=e,this.disabled=!1,this.change=new t.vpe,this.remove=new t.vpe}ngOnInit(){this.form=this.fb.group({id:new u.NI({value:this.data?this.data.id:"",disabled:!0}),rule:new u.NI(this.data?this.data.rule:"")}),this.form.valueChanges.subscribe(()=>{const e=this.form.getRawValue();this.change.emit({id:e.id,rule:e.rule,no:this.no})})}delete(e){this._ref.destroy(),this.remove.emit(this.no)}get id(){return this.form.get("id")}get rule(){return this.form.get("rule")}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(u.qu))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-white-list-detail"]],inputs:{data:"data",_ref:"_ref",no:"no",disabled:"disabled"},outputs:{change:"change",remove:"remove"},decls:7,vars:1,consts:[[1,"form-group","field-flex-start",3,"formGroup"],[1,"col-4","px-0"],["type","text","formControlName","id",1,"form-control"],[1,"col-6","px-0"],["type","text","formControlName","rule",1,"form-control"],["type","button",1,"btn","tpi-primary","ms-1",2,"border-radius","50%",3,"click"],[1,"fa","fa-minus"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"input",2),t.qZA(),t.TgZ(3,"div",3),t._UZ(4,"input",4),t.qZA(),t.TgZ(5,"button",5),t.NdJ("click",function(h){return r.delete(h)}),t._UZ(6,"i",6),t.qZA()()),2&e&&t.Q6J("formGroup",r.form)},directives:[u.JL,u.sg,u.Fj,u.JJ,u.u],styles:[""]}),s})();var R=n(51062);const O=["whitelistDetail"];function E(s,f){}let M=(()=>{class s{constructor(e){this.toolService=e,this._disabled=!1,this._whiteList=[],this.hostnums=0}ngOnInit(){}writeValue(e){this.whitelistDetailRef.clear(),this._whiteList=[],this.hostnums=0,e&&e.length>0&&e.forEach(r=>{this.addWhitelistItem(r)})}addWhitelistItem(e){let r=this.whitelistDetailRef.createComponent(B);this._whiteList.push(e?{id:e.id,rule:e.rule,no:this.hostnums}:{id:"",rule:"",no:this.hostnums}),r.instance._ref=r,r.instance.no=this.hostnums,r.instance.data=this._whiteList[this.hostnums],this.hostnums++,r.instance.change.subscribe(p=>{const h=this._whiteList.findIndex(v=>v.no===p.no);h||0!=this._whiteList.length?(this._whiteList[h].no=p.no,this._whiteList[h].id=p.id,this._whiteList[h].rule=p.rule):this._whiteList.push({id:"",rule:"",no:this.hostnums}),this.onChange(this._whiteList.map(v=>({id:v.id,rule:v.rule})))}),r.instance.remove.subscribe(p=>{const h=this._whiteList.findIndex(v=>v.no===p);this._whiteList.splice(h,1),0==this._whiteList.length?(this.hostnums=0,this.onChange(null)):this.onChange(this._whiteList.map(v=>({id:v.id,rule:v.rule})))})}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(o.g))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-white-list-form"]],viewQuery:function(e,r){if(1&e&&t.Gf(O,7,t.s_b),2&e){let p;t.iGM(p=t.CRH())&&(r.whitelistDetailRef=p.first)}},inputs:{_disabled:"_disabled"},features:[t._Bn([{provide:u.JU,useExisting:(0,t.Gpc)(()=>s),multi:!0}])],decls:15,vars:3,consts:[[1,"whitelist"],["content",""],[1,"col-12","px-0"],[1,"form-group","field-flex-start"],[1,"col-4","px-0"],[1,"form-control","border-bottomline"],[1,"col-6","px-0"],[1,"form-control","border-bottomline","control-label","required",2,"font-weight","bold"],["whitelistDetail",""],["type","button",1,"btn","tpi-second",2,"border-radius","50%",3,"click"],[1,"fa","fa-plus"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),t._uU(6,"ID"),t.qZA()(),t.TgZ(7,"div",6)(8,"label",7),t._uU(9),t.ALo(10,"translate"),t.qZA()()(),t.YNc(11,E,0,0,"ng-template",null,8,t.W1O),t.TgZ(13,"button",9),t.NdJ("click",function(){return r.addWhitelistItem()}),t._UZ(14,"i",10),t.qZA()()()),2&e&&(t.xp6(9),t.Oqu(t.lcZ(10,1,"rule")))},pipes:[R.X$],styles:[".whitelist[_ngcontent-%COMP%]{background:#ffffff;border-radius:.5rem;border:1px solid #c8c8c8;padding:.5rem}"]}),s})();var U=n(17773),S=n(19114),q=n(40845);function I(s,f){if(1&s&&(t.TgZ(0,"div",20)(1,"small",21),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"small",21),t._uU(5),t.ALo(6,"translate"),t.qZA()()),2&s){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,null==e.status?null:e.status.errors.pattern)),t.xp6(3),t.Oqu(t.lcZ(6,4,null==e.status?null:e.status.errors.isRequired))}}const N=function(){return{backgroundColor:"var(--red-300)","border-color":"var(--red-300)"}};function W(s,f){if(1&s){const e=t.EpF();t.TgZ(0,"div",22)(1,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(32).accept()}),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",24),t.NdJ("click",function(){return t.CHM(e),t.oxw(),t.MAs(32).reject()}),t.ALo(4,"translate"),t.qZA()()}2&s&&(t.xp6(1),t.s9C("label",t.lcZ(2,3,"button.confirm")),t.Q6J("ngStyle",t.DdM(7,N)),t.xp6(2),t.s9C("label",t.lcZ(4,5,"button.cancel")))}const H=function(){return{marginTop:"60px"}},K=function(){return{width:"50vw"}},F=[{path:"",component:(()=>{class s extends g.H{constructor(e,r,p,h,v,P,C,k,j,$){super(e,r),this.fb=p,this.toolService=h,this.openApiService=v,this.messageService=P,this.confirmationService=C,this.serverService=k,this.alertService=j,this.ngxSrvice=$,this.currentTitle=this.title,this.currentAction="",this.form=this.fb.group({status:new u.NI(""),dataList:new u.NI([])})}ngOnInit(){this.serverService.createAndUpdateBotDetectionList_before().subscribe(e=>{this.toolService.checkDpSuccess(e.ResHeader)&&(this.addFormValidator(this.form,e.RespBody.constraints),this.status.markAsTouched())}),this.axios_queryBotDetectionList()}axios_queryBotDetectionList(){this.serverService.queryBotDetectionList().subscribe(e=>{this.toolService.checkDpSuccess(e.ResHeader)?(this.status.setValue(e.RespBody.status),this.dataList.setValue(e.RespBody.dataList)):(this.status.setValue(""),this.dataList.setValue([]))})}update(){var e=this;let r=null;this.dataList.value&&this.dataList.value.length>0&&(r=this.dataList.value.filter(h=>!(""===h.id&&""===h.rule)).map(h=>({id:h.id,rule:h.rule})));let p={status:this.status.value,whitelistDataList:r};this.ngxSrvice.start(),this.serverService.createAndUpdateBotDetectionList(p).subscribe(function(){var h=(0,y.Z)(function*(v){if(e.toolService.checkDpSuccess(v.ResHeader)){const P=["message.update","message.success"],C=yield e.toolService.getDict(P);e.messageService.add({severity:"success",summary:`${C["message.update"]}`,detail:`${C["message.update"]} ${C["message.success"]}!`}),e.axios_queryBotDetectionList()}e.ngxSrvice.stop()});return function(v){return h.apply(this,arguments)}}())}get status(){return this.form.get("status")}get dataList(){return this.form.get("dataList")}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(i.gz),t.Y36(a.W),t.Y36(u.qu),t.Y36(o.g),t.Y36(c.l),t.Y36(m.ez),t.Y36(m.YP),t.Y36(l.N),t.Y36(A.c),t.Y36(L.LA))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-lb0010"]],features:[t._Bn([m.ez,m.YP]),t.qOj],decls:34,vars:17,consts:[[3,"title"],[3,"formGroup"],[1,"form-group","row"],[1,"col-3"],["id","status_label",1,"control-label"],[1,"p-form-check-line"],[1,"p-form-check"],["formControlName","status","value","Y","inputId","statusY"],["for","statusY",1,"ms-2","mb-0"],["formControlName","status","value","N","inputId","statusN"],["for","statusN",1,"ms-2","mb-0"],["class","text-danger",4,"ngIf"],[1,"col-12"],[1,"far","fa-question-circle","ms-2",3,"pTooltip","escape"],["formControlName","dataList"],["type","button",1,"btn","tpi-btn","tpi-primary","float-start","me-2",3,"disabled","click"],["position","top-left"],["icon","pi pi-exclamation-triangle","styleClass","cHeader cContent cIcon"],["cd",""],["pTemplate","footer"],[1,"text-danger"],[1,"form-text"],[1,"row",2,"justify-content","center"],["type","button","pButton","","icon","pi pi-check",3,"ngStyle","label","click"],["type","button","pButton","","icon","pi pi-times",1,"p-button-secondary",3,"label","click"]],template:function(e,r){1&e&&(t.TgZ(0,"app-container",0)(1,"div")(2,"form",1)(3,"div",2)(4,"div",3)(5,"label",4),t._uU(6,"Enable"),t.qZA(),t.TgZ(7,"div",5),t.ynx(8),t.TgZ(9,"div",6),t._UZ(10,"p-radioButton",7),t.TgZ(11,"label",8),t._uU(12,"Y"),t.qZA()(),t.TgZ(13,"div",6),t._UZ(14,"p-radioButton",9),t.TgZ(15,"label",10),t._uU(16,"N"),t.qZA()(),t.BQk(),t.qZA(),t.YNc(17,I,7,6,"div",11),t.qZA()(),t.TgZ(18,"div",2)(19,"div",12)(20,"label",4),t._uU(21,"Allow List"),t.qZA(),t._UZ(22,"i",13),t.ALo(23,"translate"),t._UZ(24,"app-white-list-form",14),t.qZA()(),t.TgZ(25,"div",2)(26,"div",12)(27,"button",15),t.NdJ("click",function(){return r.update()}),t._uU(28),t.ALo(29,"translate"),t.qZA()()()()()(),t._UZ(30,"p-toast",16),t.TgZ(31,"p-confirmDialog",17,18),t.YNc(33,W,5,8,"ng-template",19),t.qZA()),2&e&&(t.Q6J("title",r.currentTitle),t.xp6(2),t.Q6J("formGroup",r.form),t.xp6(15),t.Q6J("ngIf",(null==r.status?null:r.status.invalid)&&((null==r.status?null:r.status.dirty)||(null==r.status?null:r.status.touched))),t.xp6(5),t.s9C("pTooltip",t.lcZ(23,11,"allowlist_rule_tip")),t.Q6J("escape",!1),t.xp6(5),t.Q6J("disabled",!r.form.valid),t.xp6(1),t.Oqu(t.lcZ(29,13,"button.update")),t.xp6(2),t.Akn(t.DdM(15,H)),t.xp6(1),t.Akn(t.DdM(16,K)))},directives:[D.e,u._Y,u.JL,u.sg,T.EU,u.JJ,u.u,b.O5,Z.u,M,U.FN,S.Q,m.jx,q.Hq,b.PC],pipes:[R.X$],styles:[""]}),s})(),canActivate:[d.u6]}];let w=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[i.Bz.forChild(F)],i.Bz]}),s})();var G=n(48750),Y=n(31890);let J=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({providers:[d.u6],imports:[[b.ez,w,G.W,Y.m,d.DL,u.UX,u.u5]]}),s})()},63710:(x,_,n)=>{n.d(_,{e:()=>a});var i=n(87587),d=n(69808),y=n(51062);function g(o,c){if(1&o&&(i.TgZ(0,"div")(1,"h3",9),i._uU(2),i.ALo(3,"translate"),i.qZA()()),2&o){const l=i.oxw();i.xp6(2),i.Oqu(i.lcZ(3,1,l.title))}}function u(o,c){if(1&o){const l=i.EpF();i.TgZ(0,"div",10)(1,"button",11),i.NdJ("click",function(){return i.CHM(l),i.oxw().return()}),i._UZ(2,"i",12),i._uU(3),i.ALo(4,"translate"),i.qZA(),i.TgZ(5,"span",13),i._uU(6),i.qZA(),i.TgZ(7,"span",14),i._uU(8),i.qZA()()}if(2&o){const l=i.oxw();i.xp6(3),i.hij(" ",i.lcZ(4,3,"button.return_to_list")," "),i.xp6(3),i.hij("",l.getHead()," /"),i.xp6(2),i.Oqu(l.getTail())}}const m=[[["","center-view","center"]],"*"],t=["[center-view=center]","*"];let a=(()=>{class o{constructor(){this.title="",this.isDefault=!0,this.headerReturn=new i.vpe}ngOnInit(){}return(){this.headerReturn.emit(null)}getHead(){const l=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return l.pop(),l.join(" / ")}getTail(){const l=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return l[l.length-1]}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275cmp=i.Xpm({type:o,selectors:[["app-container"]],inputs:{title:"title",isDefault:"isDefault"},outputs:{headerReturn:"headerReturn"},ngContentSelectors:t,decls:11,vars:2,consts:[[1,"container-fluid","h-100"],[1,"row","position-relative",2,"height","calc(100% - 40px - 0.5rem)"],[1,"col"],[2,"margin-bottom","0.5rem"],[4,"ngIf"],["style","text-align: right",4,"ngIf"],[1,"col","d-flex","justify-content-center"],[1,"my-0","mb-2"],[1,"p-2"],["id","content",1,"page-title"],[2,"text-align","right"],["type","button","icon","",1,"btn","float-start","tpi-header-return",3,"click"],[1,"fas","fa-arrow-left",2,"margin-right","5px"],[1,"mb-0",2,"font-size","0.8rem","color","#666464"],[1,"mb-0",2,"font-size","0.8rem","color","#ff6e38","font-weight","bold"]],template:function(l,A){1&l&&(i.F$t(m),i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i.YNc(4,g,4,3,"div",4),i.YNc(5,u,9,5,"div",5),i.TgZ(6,"div",6),i.Hsn(7),i.qZA()(),i._UZ(8,"hr",7),i.Hsn(9,1),i._UZ(10,"div",8),i.qZA()()()),2&l&&(i.xp6(4),i.Q6J("ngIf",A.isDefault),i.xp6(1),i.Q6J("ngIf",!A.isDefault))},directives:[d.O5],pipes:[y.X$],styles:[".card.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:400;color:#5a5541}"]}),o})()},92718:(x,_,n)=>{n.d(_,{u:()=>c});var i=n(54004),d=n(70262),y=n(62843),g=n(87587),u=n(4516),m=n(89709),t=n(99291),a=n(38441),o=n(60991);let c=(()=>{class l{constructor(L,D,T,b,Z){this.toolService=L,this.tokenService=D,this.router=T,this.ngxService=b,this.logoutService=Z}canActivate(){return this.ngxService.stopAll(),!this.toolService.isTokenExpired()||this.toolService.refreshToken().pipe((0,i.U)(L=>!!L.access_token),(0,d.K)(this.handleError.bind(this)))}handleError(L){return setTimeout(()=>this.logoutService.logout()),(0,y._)(()=>L)}}return l.\u0275fac=function(L){return new(L||l)(g.LFG(u.g),g.LFG(m.B),g.LFG(t.F0),g.LFG(a.LA),g.LFG(o.P))},l.\u0275prov=g.Yz7({token:l,factory:l.\u0275fac}),l})()},86347:(x,_,n)=>{n.d(_,{DL:()=>i.D,u6:()=>y.u});var i=n(48895),y=(n(45240),n(92718));n(4516)},71330:(x,_,n)=>{n.d(_,{l:()=>u});var i=n(92340),d=n(57553),y=n(87587),g=n(96614);let u=(()=>{class m{constructor(a){this.api=a,this.api.baseUrl=i.N.dpPath}get basePath(){return i.N.isv4?"dgrv4/11":"tsmpdpaa/11"}queryOpenApiKeyByClientId(a){let o={ReqHeader:this.api.getReqHeader(d.Nx.queryOpenApiKeyByClientId),ReqBody:a};return this.api.npPost(`${this.basePath}/DPB0090`,o)}queryOpenApiKeyDetailByPk(a){let o={ReqHeader:this.api.getReqHeader(d.Nx.queryOpenApiKeyDetailByPk),ReqBody:a};return this.api.npPost(`${this.basePath}/DPB0091`,o)}writeOpenApiKeyReq(a){let o={ReqHeader:this.api.getReqHeader(d.Nx.writeOpenApiKeyReq),ReqBody:a};return this.api.npPost(`${this.basePath}/DPB0092`,o)}queryApiLikeList(a){let o={ReqHeader:this.api.getReqHeader(d.Nx.queryApiLikeList),ReqBody:a};return this.api.npPost(`${this.basePath}/DPB0093`,o)}queryOpenApiKeyByDateAndLike_before(){let a={ReqHeader:this.api.getReqHeader(d.Nx.queryOpenApiKeyByDateAndLike),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0094?before`,a)}queryOpenApiKeyByDateAndLike_ignore1298(a){let o={ReqHeader:this.api.getReqHeader(d.Nx.queryOpenApiKeyByDateAndLike),ReqBody:a};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0094`,o)}queryOpenApiKeyByDateAndLike(a){let o={ReqHeader:this.api.getReqHeader(d.Nx.queryOpenApiKeyByDateAndLike),ReqBody:a};return this.api.npPost(`${this.basePath}/DPB0094`,o)}queryClientListByRegStatusLike_ignore1298(a){let o={ReqHeader:this.api.getReqHeader(d.Nx.queryClientListByRegStatusLike),ReqBody:a};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0095`,o)}queryClientListByRegStatusLike(a){let o={ReqHeader:this.api.getReqHeader(d.Nx.queryClientListByRegStatusLike),ReqBody:a};return this.api.npPost(`${this.basePath}/DPB0095`,o)}}return m.\u0275fac=function(a){return new(a||m)(y.LFG(g.K))},m.\u0275prov=y.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()}}]);