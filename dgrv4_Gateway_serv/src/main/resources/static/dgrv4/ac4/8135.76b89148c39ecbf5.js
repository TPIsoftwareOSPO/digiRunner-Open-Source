"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[8135],{48135:(b,v,a)=>{a.r(v),a.d(v,{Ac0101Module:()=>Le});var i=a(69808),u=a(99291),m=a(15861),d=a(93075),T=a(14525),f=a(1694),_=a(94327),c=a(71764),l=a(57553),e=a(87587),h=a(56435),L=a(55679),x=a(4516),I=a(51062),N=a(1955),U=a(59783),D=a(41313),M=a(38441),S=a(96614),O=a(86518),E=a(63710),H=a(74856),k=a(40845),J=a(4119),Y=a(23099),Q=a(73407),j=a(17773);function K(o,s){1&o&&e._UZ(0,"col"),2&o&&e.Udp("width",s.$implicit.width)}function G(o,s){if(1&o&&(e.TgZ(0,"colgroup"),e.YNc(1,K,1,2,"col",33),e.qZA(),e.TgZ(2,"colgroup",34),e._uU(3," Action "),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function W(o,s){if(1&o&&(e.TgZ(0,"th",37),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Udp("width",t.width),e.xp6(1),e.hij(" ",t.header," ")}}function z(o,s){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,W,2,3,"th",35),e.TgZ(2,"th",36),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",t),e.xp6(2),e.Oqu(e.lcZ(4,2,"action"))}}function V(o,s){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=s.$implicit,n=e.oxw().$implicit;e.Udp("width",t.width),e.xp6(1),e.hij(" ","locale"==t.field?n.localeName+" ("+n.locale+")":n[t.field]," ")}}function X(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.YNc(1,V,2,3,"td",33),e.TgZ(2,"td",38)(3,"button",39),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw().changePage("detail",p)}),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",40),e.NdJ("click",function(){const p=e.CHM(t).$implicit;return e.oxw().changePage("update",p)}),e.ALo(6,"translate"),e.qZA()()()}if(2&o){const t=s.columns,n=e.oxw();e.xp6(1),e.Q6J("ngForOf",t),e.xp6(2),e.Q6J("disabled",0==n.canDetail)("pTooltip",e.lcZ(4,5,"button.roles")),e.xp6(2),e.Q6J("disabled",0==n.canUpdate)("pTooltip",e.lcZ(6,7,"button.update"))}}function ee(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",42)(2,"span",43),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",44),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).moreFuncList()}),e._uU(6),e.ALo(7,"translate"),e._UZ(8,"i",45),e.qZA()()()}if(2&o){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.uIk("colspan",t.length+1),e.xp6(2),e.AsE("",e.lcZ(4,4,"row_count"),": ",n.funcInfoList.length,""),e.xp6(3),e.hij(" ",e.lcZ(7,6,"button.more")," ")}}function te(o,s){if(1&o&&e.YNc(0,ee,9,8,"tr",41),2&o){const t=e.oxw();e.Q6J("ngIf",t.funcInfoList.length>0)}}function ne(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o){const t=s.$implicit;e.xp6(1),e.uIk("colspan",t.length+1),e.xp6(1),e.hij(" ",e.lcZ(3,2,"no_rec")," ")}}function oe(o,s){if(1&o&&(e.TgZ(0,"div",21)(1,"div",25)(2,"label"),e._uU(3,"Report URL"),e.qZA(),e._UZ(4,"pre",46),e.qZA()()),2&o){const t=e.oxw();e.xp6(4),e.Q6J("innerText",null==t.currentFuncInfo?null:t.currentFuncInfo.reportUrl)}}function re(o,s){1&o&&e._UZ(0,"col"),2&o&&e.Udp("width",s.$implicit.width)}function ie(o,s){if(1&o&&(e.TgZ(0,"colgroup"),e.YNc(1,re,1,2,"col",33),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function ae(o,s){if(1&o&&(e.TgZ(0,"th",37),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Udp("width",t.width),e.xp6(1),e.hij(" ",t.header," ")}}function le(o,s){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,ae,2,3,"th",35),e.qZA()),2&o){const t=s.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function ce(o,s){if(1&o&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&o){const t=s.$implicit,n=e.oxw().$implicit;e.Udp("width",t.width),e.xp6(1),e.hij(" ",n[t.field]," ")}}function se(o,s){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,ce,2,3,"td",33),e.qZA()),2&o){const t=s.columns;e.xp6(1),e.Q6J("ngForOf",t)}}function ue(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td",42)(2,"span",43),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",44),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).moreRoleList()}),e._uU(6),e.ALo(7,"translate"),e._UZ(8,"i",45),e.qZA()()()}if(2&o){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.uIk("colspan",t.length),e.xp6(2),e.AsE("",e.lcZ(4,4,"row_count"),": ",null==n.roleInfoList?null:n.roleInfoList.length,""),e.xp6(3),e.hij(" ",e.lcZ(7,6,"button.more")," ")}}function pe(o,s){if(1&o&&e.YNc(0,ue,9,8,"tr",41),2&o){const t=e.oxw();e.Q6J("ngIf",(null==t.roleInfoList?null:t.roleInfoList.length)>0)}}function de(o,s){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o){const t=s.$implicit;e.xp6(1),e.uIk("colspan",t.length),e.xp6(1),e.hij(" ",e.lcZ(3,2,"no_rec")," ")}}function fe(o,s){if(1&o&&(e.TgZ(0,"div",55)(1,"small",56),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"small",56),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"small",56),e._uU(8),e.ALo(9,"translate"),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(e.xi3(3,3,t.newFuncName.errors.stringalias,t.newFunNameLimitChar)),e.xp6(3),e.Oqu(e.xi3(6,6,t.newFuncName.errors.maxlength,t.newFunNameLimitChar)),e.xp6(3),e.Oqu(e.lcZ(9,9,t.newFuncName.errors.required))}}function he(o,s){if(1&o&&(e.TgZ(0,"div",55)(1,"small",56),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"small",56),e._uU(5),e.ALo(6,"translate"),e.qZA()()),2&o){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,t.newReportUrl.errors.required)),e.xp6(3),e.Oqu(e.xi3(6,4,t.newReportUrl.errors.maxlength,t.newReportUrlLimitChar))}}function me(o,s){if(1&o&&(e.TgZ(0,"div",3)(1,"div")(2,"label",57),e._uU(3,"Report URL"),e.TgZ(4,"span",58),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"small",59),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e._UZ(9,"input",60),e.YNc(10,he,7,7,"div",49),e.qZA()),2&o){const t=e.oxw(2);e.xp6(7),e.hij(" ( ",e.lcZ(8,2,"funcCode_kibana_prefix"),")"),e.xp6(3),e.Q6J("ngIf",t.newReportUrl.invalid&&(t.newReportUrl.dirty||t.newReportUrl.touched))}}function _e(o,s){if(1&o&&(e.TgZ(0,"div",55)(1,"small",56),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(e.xi3(3,1,t.newDesc.errors.maxlength,t.newFunDescLimitChar))}}function ge(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"form",2)(1,"div",21)(2,"div",22)(3,"label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"label",23),e._uU(7),e.qZA()(),e.TgZ(8,"div",22)(9,"label"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"label",23),e._uU(13),e.qZA()()(),e.TgZ(14,"div",21)(15,"div",22)(16,"label",47),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",48),e.ALo(20,"translate"),e.YNc(21,fe,10,11,"div",49),e.qZA()(),e.YNc(22,me,11,4,"div",50),e.TgZ(23,"div",21)(24,"div",29)(25,"label",51),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"div",52),e._UZ(29,"textarea",53),e.ALo(30,"translate"),e.qZA(),e.YNc(31,_e,4,4,"div",49),e.qZA()(),e.TgZ(32,"div",21)(33,"div",29)(34,"button",54),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateFunc()}),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"button",30),e.NdJ("click",function(){return e.CHM(t),e.oxw().changePage("query")}),e._uU(38),e.ALo(39,"translate"),e.qZA()()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(4),e.Oqu(e.lcZ(5,16,"fun_code")),e.xp6(3),e.Oqu(t.currentFuncInfo.funcCode),e.xp6(3),e.Oqu(e.lcZ(11,18,"fun_locale")),e.xp6(3),e.Oqu(t.currentFuncInfo.locale),e.xp6(4),e.Oqu(e.lcZ(18,20,"fun_name")),e.xp6(2),e.s9C("placeholder",e.lcZ(20,22,"new_fun_name")),e.xp6(2),e.Q6J("ngIf",t.newFuncName.invalid&&(t.newFuncName.dirty||t.newFuncName.touched)),e.xp6(1),e.Q6J("ngIf",null==t.currentFuncInfo?null:t.currentFuncInfo.reportUrl),e.xp6(4),e.Oqu(e.lcZ(27,24,"fun_desc")),e.xp6(3),e.s9C("placeholder",e.lcZ(30,26,"new_fun_desc")),e.Q6J("rows",5),e.xp6(2),e.Q6J("ngIf",t.newDesc.invalid&&(t.newDesc.dirty||t.newDesc.touched)),e.xp6(3),e.Q6J("disabled",t.form.invalid),e.xp6(1),e.hij(" ",e.lcZ(36,28,"button.update")," "),e.xp6(3),e.hij(" ",e.lcZ(39,30,"button.return_to_list")," ")}}const ve=function(){return{key:"FUNC_CODE+LOCALE"}},P=function(){return{"word-break":"break-word"}},Ae=function(){return{marginTop:"60px"}};let Te=(()=>{class o extends T.H{constructor(t,n,r,p,g,A,y,R,Z,C,q,F){super(t,n),this.funcService=r,this.fb=p,this.toolService=g,this.translate=A,this.roleService=y,this.messageService=R,this.serverService=Z,this.ngxService=C,this.api=q,this.alertService=F,this.dialogTitle="",this.funcInfoList=[],this.funcInfoListCols=[],this.canUpdate=!1,this.canDetail=!1,this.currentTitle=this.title,this.pageNum=1,this.roleInfoList=[],this.roleInfoListCols=[],this.newFunNameLimitChar={value:50},this.newFunDescLimitChar={value:300},this.newReportUrlLimitChar={value:2e3},this.file=null,this.form=this.fb.group({keyword:new d.NI(""),newFuncName:new d.NI("",f.rv(this.newFunNameLimitChar.value)),newFuncNameEn:new d.NI("",f.qc(this.newFunNameLimitChar.value)),newDesc:new d.NI("",f.dH(this.newFunDescLimitChar.value)),newReportUrl:new d.NI("",f.dH(this.newReportUrlLimitChar.value))}),this.detailForm=this.fb.group({keyword:new d.NI("")})}ngOnInit(){this.roleService.queryRTMapByUk({txIdList:["AA0102","AA0104"]}).subscribe(r=>{this.toolService.checkDpSuccess(r.ResHeader)&&(this.canUpdate=!!r.RespBody.dataList.find(p=>"AA0102"===p.txId)&&r.RespBody.dataList.find(p=>"AA0102"===p.txId).available,this.canDetail=!!r.RespBody.dataList.find(p=>"AA0104"===p.txId)&&r.RespBody.dataList.find(p=>"AA0104"===p.txId).available)}),this.translate.get(["fun_code","fun_name","fun_name_en","fun_desc","fun_locale","update_user","update_time","role_name","role_alias","role_desc"]).subscribe(r=>{this.funcInfoListCols=[{field:"funcCode",header:r.fun_code},{field:"funcName",header:r.fun_name},{field:"funcDesc",header:r.fun_desc},{field:"locale",header:r.fun_locale},{field:"updateUser",header:r.update_user},{field:"updateTime",header:r.update_time}],this.roleInfoListCols=[{field:"roleName",header:r.role_name},{field:"roleAlias",header:r.role_desc}]}),this.funcInfoList=[];let n={keyword:this.keyword.value,funcType:this.toolService.Base64Encoder(this.toolService.BcryptEncoder("0"))+",0"};this.funcService.queryTFuncList_v3_ignore1298(n).subscribe(r=>{this.toolService.checkDpSuccess(r.ResHeader)&&(this.funcInfoList=r.RespBody.funcInfoList)})}queryFuncList(){this.funcInfoList=[];let t={keyword:this.keyword.value,funcType:this.toolService.Base64Encoder(this.toolService.BcryptEncoder("0"))+",0"};this.funcService.queryTFuncList_v3(t).subscribe(n=>{this.toolService.checkDpSuccess(n.ResHeader)&&(this.funcInfoList=n.RespBody.funcInfoList)})}moreFuncList(){let t={funcCode:this.funcInfoList[this.funcInfoList.length-1].funcCode,locale:this.funcInfoList[this.funcInfoList.length-1].locale,keyword:this.keyword.value,funcType:this.toolService.Base64Encoder(this.toolService.BcryptEncoder("0"))+",0"};this.funcService.queryTFuncList_v3(t).subscribe(n=>{this.toolService.checkDpSuccess(n.ResHeader)&&(this.funcInfoList=this.funcInfoList.concat(n.RespBody.funcInfoList))})}queryRoleList(t=!1){var n;this.roleInfoList=[];let r={keyword:this.d_keyword.value,funcCode:null===(n=this.currentFuncInfo)||void 0===n?void 0:n.funcCode};t?this.funcService.queryTFuncRoleList_ignore1298(r).subscribe(p=>{this.toolService.checkDpSuccess(p.ResHeader)&&(this.roleInfoList=p.RespBody.roleInfoList)}):this.funcService.queryTFuncRoleList(r).subscribe(p=>{this.toolService.checkDpSuccess(p.ResHeader)&&(this.roleInfoList=p.RespBody.roleInfoList)})}moreRoleList(){var t;let n={roleId:this.roleInfoList[this.roleInfoList.length-1].roleId,keyword:this.keyword.value,funcCode:null===(t=this.currentFuncInfo)||void 0===t?void 0:t.funcCode};this.funcService.queryTFuncRoleList(n).subscribe(r=>{this.toolService.checkDpSuccess(r.ResHeader)&&(this.roleInfoList=this.roleInfoList.concat(r.RespBody.roleInfoList))})}changePage(t,n){var r=this;return(0,m.Z)(function*(){var p,g,A,y,R,Z;const q=yield r.toolService.getDict(["button.update","button.roles"]);let F=null===(p=r.keyword)||void 0===p?void 0:p.value;switch(r.resetFormValidator(r.form),r.resetFormValidator(r.detailForm),null===(g=r.keyword)||void 0===g||g.setValue(F),r.currentFuncInfo={},t){case"query":r.currentTitle=r.title,r.pageNum=1;break;case"detail":r.currentTitle=`${r.title} > ${q["button.roles"]}`,r.pageNum=2,r.currentFuncInfo=n,r.queryRoleList(!0);break;case"update":r.currentTitle=`${r.title} > ${q["button.update"]}`,r.pageNum=3,r.currentFuncInfo=n,r.newFuncName.setValidators([f.np(),f.dH(r.newFunNameLimitChar.value)]),r.newFuncName.setValue(r.currentFuncInfo.funcName),r.newDesc.setValidators(f.dH(r.newFunDescLimitChar.value)),r.newDesc.setValue(r.currentFuncInfo.funcDesc),(null===(A=r.currentFuncInfo)||void 0===A?void 0:A.reportUrl)&&(null===(y=r.newReportUrl)||void 0===y||y.setValue(null===(R=r.currentFuncInfo)||void 0===R?void 0:R.reportUrl),null===(Z=r.newReportUrl)||void 0===Z||Z.setValidators([f.np(),f.dH(r.newReportUrlLimitChar.value)])),r.checkTextAreaHeight(),r.pageNum=3}})()}checkTextAreaHeight(){const t=document.getElementById("newDescTextArea");this.currentFuncInfo.funcDesc&&t&&0===t.clientHeight&&(t.style.height="254px")}updateFunc(){var n,r,p,g,A,y,R,t=this;let Z={funcCode:null===(n=this.currentFuncInfo)||void 0===n?void 0:n.funcCode,locale:null===(r=this.currentFuncInfo)||void 0===r?void 0:r.locale,desc:null===(p=this.currentFuncInfo)||void 0===p?void 0:p.funcDesc,newDesc:this.newDesc.value,funcName:null===(g=this.currentFuncInfo)||void 0===g?void 0:g.funcName,newFuncName:this.newFuncName.value};(null===(A=this.currentFuncInfo)||void 0===A?void 0:A.reportUrl)&&(Z.reportUrl=null===(y=this.currentFuncInfo)||void 0===y?void 0:y.reportUrl,Z.newReportUrl=null===(R=this.newReportUrl)||void 0===R?void 0:R.value),this.funcService.updateTFunc(Z).subscribe(function(){var C=(0,m.Z)(function*(q){if(t.toolService.checkDpSuccess(q.ResHeader)){const F=["message.update","message.func","message.success"],w=yield t.toolService.getDict(F);t.messageService.add({severity:"success",summary:`${w["message.update"]} ${w["message.func"]}`,detail:`${w["message.update"]} ${w["message.success"]}!`}),t.queryFuncList(),t.changePage("query")}});return function(q){return C.apply(this,arguments)}}())}headerReturn(){this.changePage("query")}exportTsmpFunc(){this.ngxService.start(),this.serverService.exportTsmpFunc({funcType:this.toolService.Base64Encoder(this.toolService.BcryptEncoder("0"))+",0"}).subscribe(t=>{if("application/json"===t.type){const n=new FileReader;n.onload=()=>{const r=JSON.parse(n.result);this.alertService.ok(r.ResHeader.rtnMsg,"",l.NK.warning,r.ResHeader.txDate+"<br>"+r.ResHeader.txID)},n.readAsText(t)}else{const n=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),r=c(new Date).format("YYYYMMDD_HHmm");_.saveAs(n,`TsmpFunc_${r}.xlsx`)}this.ngxService.stop()})}importTsmpFunc(){var t=this;const n={ReqHeader:this.api.getReqHeader(l.Nx.importTsmpFunc),ReqBody:{funcType:this.toolService.Base64Encoder(this.toolService.BcryptEncoder("0"))+",0"}};this.ngxService.start(),this.serverService.importTsmpFunc(n,this.file).subscribe(function(){var r=(0,m.Z)(function*(p){if(t.toolService.checkDpSuccess(p.ResHeader)){const g=["uploading","message.success","upload_result"],A=yield t.toolService.getDict(g);t.messageService.add({severity:"success",summary:A.upload_result,detail:`${A["message.success"]}!`}),t.file=null,t.queryFuncList()}t.ngxService.stop()});return function(p){return r.apply(this,arguments)}}())}fileChange(t){var n=this;return(0,m.Z)(function*(){let r=t.target.files;yield n.toolService.getDict(["uploading","cfm_img_format","cfm_size","message.success","upload_result","waiting"]),0!=r.length?(n.file=r.item(0),t.target.value=""):(n.file=null,t.target.value="")})()}openFileBrowser(){$("#file").click()}get keyword(){return this.form.get("keyword")}get newFuncName(){return this.form.get("newFuncName")}get newDesc(){return this.form.get("newDesc")}get newReportUrl(){return this.form.get("newReportUrl")}get d_keyword(){return this.detailForm.get("keyword")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.gz),e.Y36(h.W),e.Y36(L.B),e.Y36(d.qu),e.Y36(x.g),e.Y36(I.sK),e.Y36(N.N),e.Y36(U.ez),e.Y36(D.N),e.Y36(M.LA),e.Y36(S.K),e.Y36(O.c))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-ac0101"]],features:[e.qOj],decls:88,vars:92,consts:[[3,"title","isDefault","headerReturn"],[3,"hidden"],[3,"formGroup"],[1,"form-group"],[1,"col-12","d-flex","align-items-center"],[1,"col-9","col-lg-6","col-sm-6",3,"placeholder","control","searchFn"],[1,"col-12","px-0",2,"display","flex","justify-content","space-between"],["type","button",1,"btn","tpi-btn","tpi-primary","me-2",3,"click"],[2,"display","flex","align-items","center"],[1,"ui-inputgroup","me-2"],["type","file","id","file","accept",".xlsx",2,"display","none",3,"change"],["type","text","readOnly","",1,"form-control",3,"value","placeholder"],["pButton","","type","button","icon","pi pi-file","tooltipPosition","top",1,"ms-1","tpi-primary",3,"pTooltip","click"],["type","button",1,"btn","tpi-btn","tpi-primary","me-2",3,"disabled","click"],[1,"far","fa-question-circle",3,"pTooltip","escape"],["selectionMode","single","styleClass","p-datatable-striped","responsiveLayout","scroll",3,"columns","value"],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],[1,"form-group","row"],[1,"col-6","col-xl-6","col-lg-6"],[1,"form-control","border-line"],["class","form-group row",4,"ngIf"],[1,"col-12"],["readonly","","rows","2","pInputTextarea","",2,"width","100%",3,"value"],[1,"col-4","col-xl-4","col-lg-4"],["id","keyword_label",1,"control-label"],[1,"col-12","col-lg-12"],["type","button",1,"btn","tpi-btn","tpi-primary","float-start",3,"click"],[3,"formGroup",4,"ngIf"],["position","top-left"],[3,"width",4,"ngFor","ngForOf"],[2,"width","120px"],["scope","col",3,"width",4,"ngFor","ngForOf"],["scope","col",2,"width","120px"],["scope","col"],[2,"text-align","center","width","120px"],["pButton","","pRipple","","type","button","icon","pi pi-eye","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-plain",3,"disabled","pTooltip","click"],["pButton","","pRipple","","type","button","icon","fa fa-edit","tooltipPosition","top",1,"p-button-rounded","p-button-text","p-button-plain",3,"disabled","pTooltip","click"],[4,"ngIf"],[2,"color","#b7b7b7"],[2,"vertical-align","middle"],["type","button",1,"btn","tpi-header-return",3,"click"],[1,"fas","fa-angle-double-right",2,"margin-left","5px"],[1,"pre-code-style",3,"innerText"],["for","newFuncName",1,"control-label","required"],["type","text","id","newFuncName","formControlName","newFuncName",1,"form-control",3,"placeholder"],["class","text-danger",4,"ngIf"],["class","form-group",4,"ngIf"],["for","newDesc"],[2,"display","block"],["id","newDescTextArea","pInputTextarea","","formControlName","newDesc",1,"form-control",3,"rows","placeholder"],["type","button",1,"btn","tpi-btn","tpi-primary","float-start","me-3",3,"disabled","click"],[1,"text-danger"],[1,"form-text"],["for","newReportUrl"],[2,"color","red"],[1,"ps-2"],["type","text","id","newReportUrl","formControlName","newReportUrl","placeholder","Report URL",1,"form-control"]],template:function(t,n){1&t&&(e.TgZ(0,"app-container",0),e.NdJ("headerReturn",function(){return n.headerReturn()}),e.TgZ(1,"div",1)(2,"form",2)(3,"div",3)(4,"div",4),e._UZ(5,"app-search-input",5),e.ALo(6,"translate"),e.ALo(7,"translate"),e.ALo(8,"translate"),e.ALo(9,"translate"),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div",6)(12,"button",7),e.NdJ("click",function(){return n.exportTsmpFunc()}),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",8)(16,"div",9)(17,"input",10),e.NdJ("change",function(p){return n.fileChange(p)}),e.qZA(),e._UZ(18,"input",11),e.ALo(19,"translate"),e.TgZ(20,"button",12),e.NdJ("click",function(){return n.openFileBrowser()}),e.ALo(21,"translate"),e.qZA()(),e.TgZ(22,"button",13),e.NdJ("click",function(){return n.importTsmpFunc()}),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"i",14),e.ALo(26,"translate"),e.ALo(27,"translate"),e.qZA()(),e._UZ(28,"hr"),e.TgZ(29,"p-table",15),e.YNc(30,G,4,1,"ng-template",16),e.YNc(31,z,5,4,"ng-template",17),e.YNc(32,X,7,9,"ng-template",18),e.YNc(33,te,1,1,"ng-template",19),e.YNc(34,ne,4,4,"ng-template",20),e.qZA()(),e.TgZ(35,"div",1)(36,"div",21)(37,"div",22)(38,"label"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"label",23),e._uU(42),e.qZA()(),e.TgZ(43,"div",22)(44,"label"),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"label",23),e._uU(48),e.qZA()()(),e.TgZ(49,"div",21)(50,"div",22)(51,"label"),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.TgZ(54,"label",23),e._uU(55),e.qZA()()(),e.YNc(56,oe,5,1,"div",24),e.TgZ(57,"div",21)(58,"div",25)(59,"label"),e._uU(60),e.ALo(61,"translate"),e.qZA(),e._UZ(62,"textarea",26),e.qZA()(),e._UZ(63,"hr"),e.TgZ(64,"form",2)(65,"div",21)(66,"div",27)(67,"label",28),e._uU(68),e.ALo(69,"translate"),e.qZA(),e._UZ(70,"app-search-input",5),e.ALo(71,"translate"),e.ALo(72,"translate"),e.qZA()()(),e.TgZ(73,"p-table",15),e.YNc(74,ie,2,1,"ng-template",16),e.YNc(75,le,2,1,"ng-template",17),e.YNc(76,se,2,1,"ng-template",18),e.YNc(77,pe,1,1,"ng-template",19),e.YNc(78,de,4,4,"ng-template",20),e.qZA(),e._UZ(79,"br"),e.TgZ(80,"div",21)(81,"div",29)(82,"button",30),e.NdJ("click",function(){return n.changePage("query")}),e._uU(83),e.ALo(84,"translate"),e.qZA()()()(),e.TgZ(85,"div",1),e.YNc(86,ge,40,32,"form",31),e.qZA()(),e._UZ(87,"p-toast",32)),2&t&&(e.Q6J("title",n.currentTitle)("isDefault",1==n.pageNum),e.xp6(1),e.Q6J("hidden",1!=n.pageNum),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(3),e.XOb("placeholder","",e.lcZ(6,49,"fun_code"),"\u3001",e.lcZ(7,51,"fun_name"),"\u3001",e.lcZ(8,53,"fun_desc"),"\u3001",e.lcZ(9,55,"role_name"),"\u3001",e.lcZ(10,57,"role_alias"),""),e.Q6J("control",n.keyword)("searchFn",n.queryFuncList.bind(n)),e.xp6(8),e.Oqu(e.lcZ(14,59,"button.export")),e.xp6(5),e.s9C("placeholder",e.lcZ(19,61,"upload_file")),e.Q6J("value",null==n.file?null:n.file.name),e.xp6(2),e.Q6J("pTooltip",e.lcZ(21,63,"upload_file")),e.xp6(2),e.Q6J("disabled",!(null!=n.file&&n.file.name)),e.xp6(1),e.Oqu(e.lcZ(24,65,"button.import")),e.xp6(2),e.hYB("pTooltip",'<ol style="padding-inline-start: 20px;margin-block-end: 0;"><li>',e.xi3(26,67,"import_key_tip",e.DdM(88,ve)),"</li><li>",e.lcZ(27,70,"use_in_multi_language"),"</li></ol>"),e.Q6J("escape",!1),e.xp6(4),e.Akn(e.DdM(89,P)),e.Q6J("columns",n.funcInfoListCols)("value",n.funcInfoList),e.xp6(6),e.Q6J("hidden",2!=n.pageNum),e.xp6(4),e.Oqu(e.lcZ(40,72,"fun_code")),e.xp6(3),e.Oqu(null==n.currentFuncInfo?null:n.currentFuncInfo.funcCode),e.xp6(3),e.Oqu(e.lcZ(46,74,"fun_locale")),e.xp6(3),e.Oqu(null==n.currentFuncInfo?null:n.currentFuncInfo.locale),e.xp6(4),e.Oqu(e.lcZ(53,76,"fun_name")),e.xp6(3),e.Oqu(null==n.currentFuncInfo?null:n.currentFuncInfo.funcName),e.xp6(1),e.Q6J("ngIf",null==n.currentFuncInfo?null:n.currentFuncInfo.reportUrl),e.xp6(4),e.Oqu(e.lcZ(61,78,"fun_desc")),e.xp6(2),e.Q6J("value",null==n.currentFuncInfo?null:n.currentFuncInfo.funcDesc),e.xp6(2),e.Q6J("formGroup",n.detailForm),e.xp6(4),e.Oqu(e.lcZ(69,80,"keyword_search")),e.xp6(2),e.hYB("placeholder","",e.lcZ(71,82,"role_name"),"\u3001",e.lcZ(72,84,"role_desc"),""),e.Q6J("control",n.detailForm.get("keyword"))("searchFn",n.queryRoleList.bind(n)),e.xp6(3),e.Akn(e.DdM(90,P)),e.Q6J("columns",n.roleInfoListCols)("value",n.roleInfoList),e.xp6(10),e.hij(" ",e.lcZ(84,86,"button.return_to_list")," "),e.xp6(2),e.Q6J("hidden",3!=n.pageNum),e.xp6(1),e.Q6J("ngIf",n.currentFuncInfo),e.xp6(1),e.Akn(e.DdM(91,Ae)))},directives:[E.e,d._Y,d.JL,d.sg,H.J,k.Hq,J.u,Y.iA,U.jx,i.sg,i.O5,Q.g,d.Fj,d.JJ,d.u,j.FN],pipes:[I.X$],styles:[".form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background:#F6F6F6}"]}),o})();var B=a(86347);const xe=[{path:"",component:Te,canActivate:[B.u6]}];let ye=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.Bz.forChild(xe)],u.Bz]}),o})();var Re=a(48750),Ze=a(31890);let Le=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[B.u6],imports:[[i.ez,ye,Re.W,Ze.m,d.UX,d.u5]]}),o})()},74856:(b,v,a)=>{a.d(v,{J:()=>m});var i=a(87587),u=a(93075);let m=(()=>{class d{constructor(){this.placeholder="",this.class=""}onSearch(){this.searchFn&&this.searchFn()}onKeydown(f){f.isComposing||this.onSearch()}}return d.\u0275fac=function(f){return new(f||d)},d.\u0275cmp=i.Xpm({type:d,selectors:[["app-search-input"]],inputs:{placeholder:"placeholder",control:"control",searchFn:"searchFn",class:"class"},decls:3,vars:2,consts:[[1,"p-input-icon-right","w-100"],[1,"pi","pi-search","tpi-i-search",3,"click"],["type","search",1,"form-control","tpi-i-input",3,"placeholder","formControl","keydown.enter"]],template:function(f,_){1&f&&(i.TgZ(0,"span",0)(1,"i",1),i.NdJ("click",function(){return _.onSearch()}),i.qZA(),i.TgZ(2,"input",2),i.NdJ("keydown.enter",function(l){return _.onKeydown(l)}),i.qZA()()),2&f&&(i.xp6(2),i.Q6J("placeholder",_.placeholder)("formControl",_.control))},directives:[u.Fj,u.JJ,u.oH],styles:[""]}),d})()},63710:(b,v,a)=>{a.d(v,{e:()=>c});var i=a(87587),u=a(69808),m=a(51062);function d(l,e){if(1&l&&(i.TgZ(0,"div")(1,"h3",9),i._uU(2),i.ALo(3,"translate"),i.qZA()()),2&l){const h=i.oxw();i.xp6(2),i.Oqu(i.lcZ(3,1,h.title))}}function T(l,e){if(1&l){const h=i.EpF();i.TgZ(0,"div",10)(1,"button",11),i.NdJ("click",function(){return i.CHM(h),i.oxw().return()}),i._UZ(2,"i",12),i._uU(3),i.ALo(4,"translate"),i.qZA(),i.TgZ(5,"span",13),i._uU(6),i.qZA(),i.TgZ(7,"span",14),i._uU(8),i.qZA()()}if(2&l){const h=i.oxw();i.xp6(3),i.hij(" ",i.lcZ(4,3,"button.return_to_list")," "),i.xp6(3),i.hij("",h.getHead()," /"),i.xp6(2),i.Oqu(h.getTail())}}const f=[[["","center-view","center"]],"*"],_=["[center-view=center]","*"];let c=(()=>{class l{constructor(){this.title="",this.isDefault=!0,this.headerReturn=new i.vpe}ngOnInit(){}return(){this.headerReturn.emit(null)}getHead(){const h=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return h.pop(),h.join(" / ")}getTail(){const h=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return h[h.length-1]}}return l.\u0275fac=function(h){return new(h||l)},l.\u0275cmp=i.Xpm({type:l,selectors:[["app-container"]],inputs:{title:"title",isDefault:"isDefault"},outputs:{headerReturn:"headerReturn"},ngContentSelectors:_,decls:11,vars:2,consts:[[1,"container-fluid","h-100"],[1,"row","position-relative",2,"height","calc(100% - 40px - 0.5rem)"],[1,"col"],[2,"margin-bottom","0.5rem"],[4,"ngIf"],["style","text-align: right",4,"ngIf"],[1,"col","d-flex","justify-content-center"],[1,"my-0","mb-2"],[1,"p-2"],["id","content",1,"page-title"],[2,"text-align","right"],["type","button","icon","",1,"btn","float-start","tpi-header-return",3,"click"],[1,"fas","fa-arrow-left",2,"margin-right","5px"],[1,"mb-0",2,"font-size","0.8rem","color","#666464"],[1,"mb-0",2,"font-size","0.8rem","color","#ff6e38","font-weight","bold"]],template:function(h,L){1&h&&(i.F$t(f),i.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),i.YNc(4,d,4,3,"div",4),i.YNc(5,T,9,5,"div",5),i.TgZ(6,"div",6),i.Hsn(7),i.qZA()(),i._UZ(8,"hr",7),i.Hsn(9,1),i._UZ(10,"div",8),i.qZA()()()),2&h&&(i.xp6(4),i.Q6J("ngIf",L.isDefault),i.xp6(1),i.Q6J("ngIf",!L.isDefault))},directives:[u.O5],pipes:[m.X$],styles:[".card.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:400;color:#5a5541}"]}),l})()},92718:(b,v,a)=>{a.d(v,{u:()=>e});var i=a(54004),u=a(70262),m=a(62843),d=a(87587),T=a(4516),f=a(89709),_=a(99291),c=a(38441),l=a(60991);let e=(()=>{class h{constructor(x,I,N,U,D){this.toolService=x,this.tokenService=I,this.router=N,this.ngxService=U,this.logoutService=D}canActivate(){return this.ngxService.stopAll(),!this.toolService.isTokenExpired()||this.toolService.refreshToken().pipe((0,i.U)(x=>!!x.access_token),(0,u.K)(this.handleError.bind(this)))}handleError(x){return setTimeout(()=>this.logoutService.logout()),(0,m._)(()=>x)}}return h.\u0275fac=function(x){return new(x||h)(d.LFG(T.g),d.LFG(f.B),d.LFG(_.F0),d.LFG(c.LA),d.LFG(l.P))},h.\u0275prov=d.Yz7({token:h,factory:h.\u0275fac}),h})()},86347:(b,v,a)=>{a.d(v,{DL:()=>i.D,u6:()=>m.u});var i=a(48895),m=(a(45240),a(92718));a(4516)},1955:(b,v,a)=>{a.d(v,{N:()=>T});var i=a(92340),u=a(57553),m=a(87587),d=a(96614);let T=(()=>{class f{constructor(c){this.api=c,this.api.baseUrl=i.N.dpPath}get basePath(){return i.N.isv4?"dgrv4/11":"tsmpdpaa/11"}addTRole(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.addTRole),ReqBody:c};return this.api.npPost(`${this.basePath}/AA0011`,l)}updateTRoleFunc(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.updateTRoleFunc),ReqBody:c};return this.api.npPost(`${this.basePath}/AA0013`,l)}deleteTRole(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.deleteTRole),ReqBody:c};return this.api.npPost(`${this.basePath}/AA0014`,l)}addTRoleRoleMap(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.addTRoleRoleMap),ReqBody:c};return this.api.npPost(`${this.basePath}/AA0016`,l)}deleteTRoleRoleMap(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.deleteTRoleRoleMap),ReqBody:c};return this.api.npPost(`${this.basePath}/AA0017`,l)}updateTRoleRoleMap(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.updateTRoleRoleMap),ReqBody:c};return this.api.npPost(`${this.basePath}/AA0018`,l)}queryTRoleList_v3_ignore1298(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.queryTRoleList_v3),ReqBody:c};return this.api.excuteNpPost_ignore1298(`${this.basePath}/AA0020`,l)}queryTRoleList_v3(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.queryTRoleList_v3),ReqBody:c};return this.api.npPost(`${this.basePath}/AA0020`,l)}queryTRoleRoleMapDetail(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.queryTRoleRoleMapDetail),ReqBody:c};return this.api.npPost(`${this.basePath}/AA0021`,l)}queryTRoleRoleMap_ignore1298(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.queryTRoleList_v3),ReqBody:c};return this.api.excuteNpPost_ignore1298(`${this.basePath}/AA0022`,l)}queryTRoleRoleMap(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.queryTRoleList_v3),ReqBody:c};return this.api.npPost(`${this.basePath}/AA0022`,l)}queryRoleRoleList(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.queryRoleRoleList),ReqBody:c};return this.api.npPost(`${this.basePath}/AA0023`,l)}createRTMap_before(){let c={ReqHeader:this.api.getReqHeader(u.Nx.createRTMap),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0110?before`,c)}createRTMap(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.createRTMap),ReqBody:c};return this.api.npPost(`${this.basePath}/DPB0110`,l)}queryRTMapList_ignore1298(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.queryRTMapList),ReqBody:c};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0111`,l)}queryRTMapList(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.queryRTMapList),ReqBody:c};return this.api.npPost(`${this.basePath}/DPB0111`,l)}queryRTMapByPk(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.queryRTMapByPk),ReqBody:c};return this.api.npPost(`${this.basePath}/DPB0112`,l)}updateRTMap_before(){let c={ReqHeader:this.api.getReqHeader(u.Nx.updateRTMap),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0113?before`,c)}updateRTMap(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.updateRTMap),ReqBody:c};return this.api.npPost(`${this.basePath}/DPB0113`,l)}deleteRTMap(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.deleteRTMap),ReqBody:c};return this.api.npPost(`${this.basePath}/DPB0114`,l)}queryRTMapByUk(c){let l={ReqHeader:this.api.getReqHeader(u.Nx.queryRTMapByUk),ReqBody:c};return this.api.npPost(`${this.basePath}/DPB0115`,l)}}return f.\u0275fac=function(c){return new(c||f)(m.LFG(d.K))},f.\u0275prov=m.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"}),f})()}}]);