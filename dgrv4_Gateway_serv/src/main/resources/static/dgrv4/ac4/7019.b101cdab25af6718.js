"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[7019],{47019:(T,v,t)=>{t.r(v),t.d(v,{MailTemplateIoModule:()=>$});var n=t(69808),u=t(48750),m=t(31890),h=t(93075),g=t(86347),p=t(99291),f=t(15861),o=t(14525),i=t(59783),r=t(71764),s=t(57553),y=t(94327),e=t(87587),M=t(56435),C=t(4516),R=t(71330),x=t(45330),E=t(41313),B=t(86518),O=t(22734),I=t(96614),L=t(38441),b=t(63710),S=t(4119),Z=t(40845),H=t(17773),F=t(19114),K=t(51062);const U=["fileInput"],N=function(){return{backgroundColor:"var(--red-300)","border-color":"var(--red-300)"}};function q(c,_){if(1&c){const a=e.EpF();e.TgZ(0,"div",19)(1,"button",20),e.NdJ("click",function(){return e.CHM(a),e.oxw(),e.MAs(31).accept()}),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"button",21),e.NdJ("click",function(){return e.CHM(a),e.oxw(),e.MAs(31).reject()}),e.ALo(4,"translate"),e.qZA()()}2&c&&(e.xp6(1),e.s9C("label",e.lcZ(2,3,"button.confirm")),e.Q6J("ngStyle",e.DdM(7,N)),e.xp6(2),e.s9C("label",e.lcZ(4,5,"button.cancel")))}const Y=function(){return{key:"CODE"}},G=function(){return{marginTop:"60px"}},j=function(){return{width:"50vw"}},k=[{path:"",component:(()=>{class c extends o.H{constructor(a,l,d,A,D,P,J,z,Q,X,V,w,ee){super(a,l),this.fb=d,this.toolService=A,this.openApiService=D,this.messageService=P,this.dialogService=J,this.confirmationService=z,this.serverService=Q,this.alertService=X,this.fileService=V,this.api=w,this.ngxService=ee,this.currentTitle=this.title,this.pageNum=1,this.checkLackApi=!1,this.checkCAflag=!1,this.imported=!1}ngOnInit(){return(0,f.Z)(function*(){})()}headerReturn(){}exportTsmpDpMailTpltClick(){this.ngxService.start(),this.serverService.exportTsmpDpMailTplt().subscribe(a=>{if("application/json"===a.type){const l=new FileReader;l.onload=()=>{const d=JSON.parse(l.result);this.alertService.ok(d.ResHeader.rtnMsg,"",s.NK.warning,d.ResHeader.txDate+"<br>"+d.ResHeader.txID)},l.readAsText(a)}else{const l=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"}),d=r(new Date).format("YYYYMMDD_HHmm");y.saveAs(l,`MailTplt_${d}.xlsx`)}this.ngxService.stop()})}openFileBrowser(){var a;this.fileInput&&(this.fileInput.nativeElement.value=""),null===(a=this.fileInput)||void 0===a||a.nativeElement.click()}changeFile(a){const l=a.target;l.files&&0!=l.files.length?this._file=l.files[0]:(this.fileInput&&(this.fileInput.nativeElement.value=""),this._file=void 0)}uploadFile(){var a=this;const l={ReqHeader:this.api.getReqHeader(s.Nx.importTsmpDpMailTplt),ReqBody:{}};this.ngxService.start(),console.log(this._file),this.serverService.importTsmpDpMailTplt(l,this._file).subscribe(function(){var d=(0,f.Z)(function*(A){if(a.toolService.checkDpSuccess(A.ResHeader)){const D=["uploading","message.success","upload_result"],P=yield a.toolService.getDict(D);a.messageService.add({severity:"success",summary:P.upload_result,detail:`${P["message.success"]}!`}),a._file=void 0}a.ngxService.stop()});return function(A){return d.apply(this,arguments)}}())}}return c.\u0275fac=function(a){return new(a||c)(e.Y36(p.gz),e.Y36(M.W),e.Y36(h.qu),e.Y36(C.g),e.Y36(R.l),e.Y36(i.ez),e.Y36(x.xA),e.Y36(i.YP),e.Y36(E.N),e.Y36(B.c),e.Y36(O.I),e.Y36(I.K),e.Y36(L.LA))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-mail-template-io"]],viewQuery:function(a,l){if(1&a&&e.Gf(U,5),2&a){let d;e.iGM(d=e.CRH())&&(l.fileInput=d.first)}},features:[e._Bn([i.ez,i.YP]),e.qOj],decls:33,vars:35,consts:[[3,"title","isDefault","headerReturn"],[3,"hidden"],[1,"form-group","row"],[1,"col-2"],[1,"control-label"],[1,"form-control","border-line",2,"background","#f6f6f6"],["type","button",1,"btn","tpi-btn","tpi-primary",3,"click"],[1,"col-5"],[1,"far","fa-question-circle","ms-2",3,"pTooltip","escape"],[1,"ui-inputgroup"],["type","file","id","file","accept",".xlsx",2,"display","none",3,"change"],["fileInput",""],["readonly","","type","text",1,"form-control",3,"value","placeholder","click"],["pButton","","type","button","icon","pi pi-file",1,"ms-1","tpi-primary",3,"click"],["type","button",1,"btn","tpi-btn","tpi-primary","ms-2",3,"disabled","click"],["position","top-left"],["icon","pi pi-exclamation-triangle","styleClass","cHeader cContent cIcon"],["cd",""],["pTemplate","footer"],[1,"row",2,"justify-content","center"],["type","button","pButton","","icon","pi pi-check",3,"ngStyle","label","click"],["type","button","pButton","","icon","pi pi-times",1,"p-button-secondary",3,"label","click"]],template:function(a,l){1&a&&(e.TgZ(0,"app-container",0),e.NdJ("headerReturn",function(){return l.headerReturn()}),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",5)(8,"button",6),e.NdJ("click",function(){return l.exportTsmpDpMailTpltClick()}),e._uU(9),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div",7)(12,"label",4),e._uU(13),e.ALo(14,"translate"),e._UZ(15,"i",8),e.ALo(16,"translate"),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div")(19,"div",9)(20,"input",10,11),e.NdJ("change",function(A){return l.changeFile(A)}),e.qZA(),e.TgZ(22,"input",12),e.NdJ("click",function(){return l.openFileBrowser()}),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"button",13),e.NdJ("click",function(){return l.openFileBrowser()}),e.qZA(),e.TgZ(25,"button",14),e.NdJ("click",function(){return l.uploadFile()}),e._uU(26),e.ALo(27,"translate"),e.qZA()()()()()(),e._UZ(28,"hr"),e.qZA(),e._UZ(29,"p-toast",15),e.TgZ(30,"p-confirmDialog",16,17),e.YNc(32,q,5,8,"ng-template",18),e.qZA()),2&a&&(e.Q6J("title",l.currentTitle)("isDefault",1==l.pageNum),e.xp6(1),e.Q6J("hidden",1!=l.pageNum),e.xp6(4),e.hij("",e.lcZ(6,17,"button.export")," "),e.xp6(4),e.hij(" ",e.lcZ(10,19,"button.export")," "),e.xp6(4),e.hij("",e.lcZ(14,21,"button.import")," "),e.xp6(2),e.hYB("pTooltip",'<ol style="padding-inline-start: 20px;margin-block-end: 0;"><li>',e.xi3(16,23,"import_key_tip",e.DdM(32,Y)),"</li><li>",e.lcZ(17,26,"use_in_multi_language"),"</li></ol>"),e.Q6J("escape",!1),e.xp6(7),e.s9C("placeholder",e.lcZ(23,28,"upload_file")),e.Q6J("value",null==l._file?null:l._file.name),e.xp6(3),e.Q6J("disabled",!l._file),e.xp6(1),e.hij(" ",e.lcZ(27,30,"button.upload")," "),e.xp6(3),e.Akn(e.DdM(33,G)),e.xp6(1),e.Akn(e.DdM(34,j)))},directives:[b.e,S.u,Z.Hq,H.FN,F.Q,i.jx,n.PC],pipes:[K.X$],styles:[".form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background:#F6F6F6}"]}),c})(),canActivate:[g.u6]}];let W=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[[p.Bz.forChild(k)],p.Bz]}),c})(),$=(()=>{class c{}return c.\u0275fac=function(a){return new(a||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({providers:[g.u6],imports:[[n.ez,W,u.W,m.m,h.UX,h.u5]]}),c})()},63710:(T,v,t)=>{t.d(v,{e:()=>o});var n=t(87587),u=t(69808),m=t(51062);function h(i,r){if(1&i&&(n.TgZ(0,"div")(1,"h3",9),n._uU(2),n.ALo(3,"translate"),n.qZA()()),2&i){const s=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,1,s.title))}}function g(i,r){if(1&i){const s=n.EpF();n.TgZ(0,"div",10)(1,"button",11),n.NdJ("click",function(){return n.CHM(s),n.oxw().return()}),n._UZ(2,"i",12),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"span",13),n._uU(6),n.qZA(),n.TgZ(7,"span",14),n._uU(8),n.qZA()()}if(2&i){const s=n.oxw();n.xp6(3),n.hij(" ",n.lcZ(4,3,"button.return_to_list")," "),n.xp6(3),n.hij("",s.getHead()," /"),n.xp6(2),n.Oqu(s.getTail())}}const p=[[["","center-view","center"]],"*"],f=["[center-view=center]","*"];let o=(()=>{class i{constructor(){this.title="",this.isDefault=!0,this.headerReturn=new n.vpe}ngOnInit(){}return(){this.headerReturn.emit(null)}getHead(){const s=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return s.pop(),s.join(" / ")}getTail(){const s=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return s[s.length-1]}}return i.\u0275fac=function(s){return new(s||i)},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-container"]],inputs:{title:"title",isDefault:"isDefault"},outputs:{headerReturn:"headerReturn"},ngContentSelectors:f,decls:11,vars:2,consts:[[1,"container-fluid","h-100"],[1,"row","position-relative",2,"height","calc(100% - 40px - 0.5rem)"],[1,"col"],[2,"margin-bottom","0.5rem"],[4,"ngIf"],["style","text-align: right",4,"ngIf"],[1,"col","d-flex","justify-content-center"],[1,"my-0","mb-2"],[1,"p-2"],["id","content",1,"page-title"],[2,"text-align","right"],["type","button","icon","",1,"btn","float-start","tpi-header-return",3,"click"],[1,"fas","fa-arrow-left",2,"margin-right","5px"],[1,"mb-0",2,"font-size","0.8rem","color","#666464"],[1,"mb-0",2,"font-size","0.8rem","color","#ff6e38","font-weight","bold"]],template:function(s,y){1&s&&(n.F$t(p),n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),n.YNc(4,h,4,3,"div",4),n.YNc(5,g,9,5,"div",5),n.TgZ(6,"div",6),n.Hsn(7),n.qZA()(),n._UZ(8,"hr",7),n.Hsn(9,1),n._UZ(10,"div",8),n.qZA()()()),2&s&&(n.xp6(4),n.Q6J("ngIf",y.isDefault),n.xp6(1),n.Q6J("ngIf",!y.isDefault))},directives:[u.O5],pipes:[m.X$],styles:[".card.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:400;color:#5a5541}"]}),i})()},92718:(T,v,t)=>{t.d(v,{u:()=>r});var n=t(54004),u=t(70262),m=t(62843),h=t(87587),g=t(4516),p=t(89709),f=t(99291),o=t(38441),i=t(60991);let r=(()=>{class s{constructor(e,M,C,R,x){this.toolService=e,this.tokenService=M,this.router=C,this.ngxService=R,this.logoutService=x}canActivate(){return this.ngxService.stopAll(),!this.toolService.isTokenExpired()||this.toolService.refreshToken().pipe((0,n.U)(e=>!!e.access_token),(0,u.K)(this.handleError.bind(this)))}handleError(e){return setTimeout(()=>this.logoutService.logout()),(0,m._)(()=>e)}}return s.\u0275fac=function(e){return new(e||s)(h.LFG(g.g),h.LFG(p.B),h.LFG(f.F0),h.LFG(o.LA),h.LFG(i.P))},s.\u0275prov=h.Yz7({token:s,factory:s.\u0275fac}),s})()},86347:(T,v,t)=>{t.d(v,{DL:()=>n.D,u6:()=>m.u});var n=t(48895),m=(t(45240),t(92718));t(4516)},22734:(T,v,t)=>{t.d(v,{I:()=>g});var n=t(92340),u=t(57553),m=t(87587),h=t(96614);let g=(()=>{class p{constructor(o){this.api=o,this.api.baseUrl=n.N.dpPath}get basePath(){return n.N.isv4?"dgrv4/11":"tsmpdpaa/11"}downloadFile(o){return this.api.excuteDpGetFile(`${this.basePath}/DPB0078?filePath=${o.filePath}`)}uploadFile2(o){return this.api.excuteFileUpload(`${this.basePath}/DPB0082`,o)}exportClientRelated(){let o={ReqHeader:this.api.getReqHeader(u.Nx.exportClientRelated),ReqBody:{}};return this.api.excutePostGetFile(`${this.basePath}/AA1120`,o)}importClientRelated(o,i){return this.api.excuteTsmpSetting(`${this.basePath}/AA1121`,i,o)}importClientRelatedAllCover(o){let i={ReqHeader:this.api.getReqHeader(u.Nx.importClientRelatedAllCover),ReqBody:o};return this.api.npPost(`${this.basePath}/AA1128`,i)}importClientRelatedConfirm(o){let i={ReqHeader:this.api.getReqHeader(u.Nx.importClientRelatedConfirm),ReqBody:o};return this.api.npPost(`${this.basePath}/AA1129`,i)}}return p.\u0275fac=function(o){return new(o||p)(m.LFG(h.K))},p.\u0275prov=m.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},71330:(T,v,t)=>{t.d(v,{l:()=>g});var n=t(92340),u=t(57553),m=t(87587),h=t(96614);let g=(()=>{class p{constructor(o){this.api=o,this.api.baseUrl=n.N.dpPath}get basePath(){return n.N.isv4?"dgrv4/11":"tsmpdpaa/11"}queryOpenApiKeyByClientId(o){let i={ReqHeader:this.api.getReqHeader(u.Nx.queryOpenApiKeyByClientId),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0090`,i)}queryOpenApiKeyDetailByPk(o){let i={ReqHeader:this.api.getReqHeader(u.Nx.queryOpenApiKeyDetailByPk),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0091`,i)}writeOpenApiKeyReq(o){let i={ReqHeader:this.api.getReqHeader(u.Nx.writeOpenApiKeyReq),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0092`,i)}queryApiLikeList(o){let i={ReqHeader:this.api.getReqHeader(u.Nx.queryApiLikeList),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0093`,i)}queryOpenApiKeyByDateAndLike_before(){let o={ReqHeader:this.api.getReqHeader(u.Nx.queryOpenApiKeyByDateAndLike),ReqBody:{}};return this.api.npPost(`${this.basePath}/DPB0094?before`,o)}queryOpenApiKeyByDateAndLike_ignore1298(o){let i={ReqHeader:this.api.getReqHeader(u.Nx.queryOpenApiKeyByDateAndLike),ReqBody:o};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0094`,i)}queryOpenApiKeyByDateAndLike(o){let i={ReqHeader:this.api.getReqHeader(u.Nx.queryOpenApiKeyByDateAndLike),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0094`,i)}queryClientListByRegStatusLike_ignore1298(o){let i={ReqHeader:this.api.getReqHeader(u.Nx.queryClientListByRegStatusLike),ReqBody:o};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0095`,i)}queryClientListByRegStatusLike(o){let i={ReqHeader:this.api.getReqHeader(u.Nx.queryClientListByRegStatusLike),ReqBody:o};return this.api.npPost(`${this.basePath}/DPB0095`,i)}}return p.\u0275fac=function(o){return new(o||p)(m.LFG(h.K))},p.\u0275prov=m.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()}}]);