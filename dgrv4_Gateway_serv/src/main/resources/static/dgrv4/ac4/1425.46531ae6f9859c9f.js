"use strict";(self.webpackChunksrcAngular=self.webpackChunksrcAngular||[]).push([[1425],{21425:(I,m,i)=>{i.r(m),i.d(m,{Ai0003Module:()=>Y});var r=i(48750),s=i(69808),g=i(31890),d=i(93075),_=i(86347),c=i(99291),v=i(15861),o=i(14525),e=i(71764),t=i(87587),l=i(56435),T=i(67520),A=i(4516),D=i(63710),b=i(40845),C=i(4119),y=i(23099),q=i(59783),Z=i(51062);const B=["dt"];function E(n,h){1&n&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"ID"),t.qZA(),t.TgZ(3,"th",11),t._uU(4),t.ALo(5,"translate"),t._UZ(6,"p-sortIcon",12),t.qZA(),t.TgZ(7,"th",13),t._uU(8),t.ALo(9,"translate"),t._UZ(10,"p-sortIcon",14),t.qZA(),t.TgZ(11,"th"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"th",15),t._uU(15),t.ALo(16,"translate"),t._UZ(17,"p-sortIcon",16),t.qZA(),t.TgZ(18,"th",17),t._uU(19),t.ALo(20,"translate"),t._UZ(21,"p-sortIcon",18),t.qZA(),t.TgZ(22,"th",19),t._uU(23),t.ALo(24,"translate"),t._UZ(25,"p-sortIcon",20),t.qZA(),t.TgZ(26,"th",21),t._uU(27),t.ALo(28,"translate"),t._UZ(29,"p-sortIcon",22),t.qZA(),t.TgZ(30,"th",23),t._uU(31),t.ALo(32,"translate"),t._UZ(33,"p-sortIcon",24),t.qZA()()),2&n&&(t.xp6(4),t.hij("",t.lcZ(5,8,"ai.consumer_type")," "),t.xp6(4),t.hij("",t.lcZ(9,10,"ai.consumer_id")," "),t.xp6(4),t.Oqu(t.lcZ(13,12,"ai.api_key_code")),t.xp6(3),t.hij("",t.lcZ(16,14,"ai.template_name")," "),t.xp6(4),t.hij("",t.lcZ(20,16,"ai.request_timestamp")," "),t.xp6(4),t.hij("",t.lcZ(24,18,"ai.api_input_token")," "),t.xp6(4),t.hij("",t.lcZ(28,20,"ai.api_output_token")," "),t.xp6(4),t.hij("",t.lcZ(32,22,"create_time")," "))}function N(n,h){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA(),t.TgZ(17,"td"),t._uU(18),t.qZA()()),2&n){const a=h.$implicit,p=t.oxw();t.xp6(2),t.Oqu(a.id),t.xp6(2),t.Oqu(a.aiApikeyConsumerType),t.xp6(2),t.Oqu(a.aiApikeyConsumerId),t.xp6(2),t.Oqu(null==a.dgrAiApiKey?null:a.dgrAiApiKey.aiApikeyCode),t.xp6(2),t.Oqu(null==a.dgrAiPromptTemplate?null:a.dgrAiPromptTemplate.aiPromptTemplateName),t.xp6(2),t.Oqu(a.requstTs),t.xp6(2),t.Oqu(a.inputTokenCount),t.xp6(2),t.Oqu(a.outputTokenCount),t.xp6(2),t.Oqu(p.formateDate(a.createDateTime))}}function H(n,h){if(1&n){const a=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){return t.CHM(a),t.oxw(3).moreData()}),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",30),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"button.more")," "))}function U(n,h){if(1&n&&(t.TgZ(0,"tr")(1,"td",26)(2,"span",27),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,H,4,3,"button",28),t.qZA()()),2&n){const a=t.oxw(2);t.xp6(1),t.uIk("colspan",9),t.xp6(2),t.AsE("",t.lcZ(4,4,"row_count"),": ",a.tableData.length,""),t.xp6(2),t.Q6J("ngIf",a.tableData.length<a.totalElements)}}function S(n,h){if(1&n&&t.YNc(0,U,6,6,"tr",25),2&n){const a=t.oxw();t.Q6J("ngIf",a.tableData.length>0)}}function O(n,h){1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n&&(t.xp6(1),t.uIk("colspan",9),t.xp6(1),t.hij(" ",t.lcZ(3,2,"no_rec")," "))}const M=function(){return{"word-break":"break-word"}},L=[{path:"",component:(()=>{class n extends o.H{constructor(a,p,u,P){super(a,p),this.aiService=u,this.toolService=P,this.currentTitle=this.title,this.pageNum=1,this.currentAction="",this.tableData=[],this.totalElements=0,this.currentPage=0}listAIUsage(){this.currentPage=0,this.aiService.listAIUsage({pagination:{pageNum:this.currentPage,pageSize:20,sortBy:["createDateTime"],sortOrder:"desc"}}).subscribe(a=>{this.tableData=this.toolService.checkDpSuccess(a.ResHeader)?a.RespBody.content:[],this.table.reset(),this.lastSortEvent=void 0})}ngOnInit(){this.currentPage=0,this.aiService.listAIUsage_ignore1298({pagination:{pageNum:this.currentPage,pageSize:20,sortBy:["createDateTime"],sortOrder:"desc"}}).subscribe(a=>{this.toolService.checkDpSuccess(a.ResHeader)?(this.tableData=a.RespBody.content,this.totalElements=a.RespBody.totalElements,this.currentPage=a.RespBody.number+1):this.tableData=[]})}headerReturn(){this.changePage("query")}moreData(){this.aiService.listAIUsage({pagination:{pageNum:this.currentPage,pageSize:20,sortBy:["createDateTime"],sortOrder:"desc"}}).subscribe(a=>{this.toolService.checkDpSuccess(a.ResHeader)&&(this.tableData=this.tableData.concat(a.RespBody.content),this.totalElements=a.RespBody.totalElements,this.currentPage=a.RespBody.number+1,this.lastSortEvent&&this.customSort(this.lastSortEvent))})}changePage(a,p){var u=this;return(0,v.Z)(function*(){u.currentAction=a,yield u.toolService.getDict(["button.detail"]),"query"===a&&(u.pageNum=1,u.currentTitle=u.title)})()}formateDate(a){return a&&"Invalid Date"!=e(a).format("YYYY-MM-DD HH:mm:ss")?e(a).format("YYYY-MM-DD HH:mm:ss"):""}customSort(a){this.lastSortEvent=a;const p=a.field;a.data.sort((u,P)=>{let f,x,R;return"dgrAiPromptTemplate.aiPromptTemplateName"==p?(f=this.resolveFieldData(u,p),x=this.resolveFieldData(P,p)):(f=u[p],x=P[p]),R=["createDateTime","outputTokenCount","inputTokenCount","requstTs"].includes(p)?Number(f)-Number(x):null==f&&null!=x?-1:null!=f&&null==x?1:null==f&&null==x?0:f.toString().localeCompare(x.toString()),a.order*R})}resolveFieldData(a,p){return p?-1===p.indexOf(".")?a[p]:p.split(".").reduce((u,P)=>u?u[P]:null,a):null}}return n.\u0275fac=function(a){return new(a||n)(t.Y36(c.gz),t.Y36(l.W),t.Y36(T.p),t.Y36(A.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ai0003"]],viewQuery:function(a,p){if(1&a&&t.Gf(B,5),2&a){let u;t.iGM(u=t.CRH())&&(p.table=u.first)}},features:[t.qOj],decls:12,vars:11,consts:[[3,"title","isDefault","headerReturn"],[3,"hidden"],[1,"form-group","row"],[1,"col-12"],["pButton","","pRipple","","type","button","icon","fas fa-redo-alt",1,"p-button-rounded","p-button-text","p-button-plain","tpi-primary","float-end",3,"pTooltip","click"],["styleClass","p-datatable-striped","responsiveLayout","scroll",3,"value","customSort","sortFunction"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],["pTemplate","emptymessage"],["pSortableColumn","aiApikeyConsumerType"],["field","aiApikeyConsumerType"],["pSortableColumn","aiApikeyConsumerId"],["field","aiApikeyConsumerId"],["pSortableColumn","dgrAiPromptTemplate.aiPromptTemplateName"],["field","dgrAiPromptTemplate.aiPromptTemplateName"],["pSortableColumn","requstTs"],["field","requstTs"],["pSortableColumn","inputTokenCount"],["field","inputTokenCount"],["pSortableColumn","outputTokenCount"],["field","outputTokenCount"],["pSortableColumn","createDateTime"],["field","createDateTime"],[4,"ngIf"],[2,"color","#b7b7b7"],[2,"vertical-align","middle"],["type","button","icon","","class","btn tpi-header-return",3,"click",4,"ngIf"],["type","button","icon","",1,"btn","tpi-header-return",3,"click"],[1,"fas","fa-angle-double-right",2,"margin-left","5px"]],template:function(a,p){1&a&&(t.TgZ(0,"app-container",0),t.NdJ("headerReturn",function(){return p.headerReturn()}),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){return p.listAIUsage()}),t.ALo(5,"translate"),t.qZA()()(),t.TgZ(6,"p-table",5,6),t.NdJ("sortFunction",function(P){return p.customSort(P)}),t.YNc(8,E,34,24,"ng-template",7),t.YNc(9,N,19,9,"ng-template",8),t.YNc(10,S,1,1,"ng-template",9),t.YNc(11,O,4,4,"ng-template",10),t.qZA()()()),2&a&&(t.Q6J("title",p.currentTitle)("isDefault",1==p.pageNum),t.xp6(1),t.Q6J("hidden",1!=p.pageNum),t.xp6(3),t.Q6J("pTooltip",t.lcZ(5,8,"button.refresh")),t.xp6(2),t.Akn(t.DdM(10,M)),t.Q6J("value",p.tableData)("customSort",!0))},directives:[D.e,b.Hq,C.u,y.iA,q.jx,y.lQ,y.fz,s.O5],pipes:[Z.X$],styles:[""]}),n})(),canActivate:[_.u6]}];let $=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.Bz.forChild(L)],c.Bz]}),n})(),Y=(()=>{class n{}return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[_.u6],imports:[[s.ez,$,r.W,g.m,d.UX,d.u5]]}),n})()},63710:(I,m,i)=>{i.d(m,{e:()=>o});var r=i(87587),s=i(69808),g=i(51062);function d(e,t){if(1&e&&(r.TgZ(0,"div")(1,"h3",9),r._uU(2),r.ALo(3,"translate"),r.qZA()()),2&e){const l=r.oxw();r.xp6(2),r.Oqu(r.lcZ(3,1,l.title))}}function _(e,t){if(1&e){const l=r.EpF();r.TgZ(0,"div",10)(1,"button",11),r.NdJ("click",function(){return r.CHM(l),r.oxw().return()}),r._UZ(2,"i",12),r._uU(3),r.ALo(4,"translate"),r.qZA(),r.TgZ(5,"span",13),r._uU(6),r.qZA(),r.TgZ(7,"span",14),r._uU(8),r.qZA()()}if(2&e){const l=r.oxw();r.xp6(3),r.hij(" ",r.lcZ(4,3,"button.return_to_list")," "),r.xp6(3),r.hij("",l.getHead()," /"),r.xp6(2),r.Oqu(l.getTail())}}const c=[[["","center-view","center"]],"*"],v=["[center-view=center]","*"];let o=(()=>{class e{constructor(){this.title="",this.isDefault=!0,this.headerReturn=new r.vpe}ngOnInit(){}return(){this.headerReturn.emit(null)}getHead(){const l=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return l.pop(),l.join(" / ")}getTail(){const l=this.title.indexOf(">")>-1?this.title.split(">"):[this.title];return l[l.length-1]}}return e.\u0275fac=function(l){return new(l||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-container"]],inputs:{title:"title",isDefault:"isDefault"},outputs:{headerReturn:"headerReturn"},ngContentSelectors:v,decls:11,vars:2,consts:[[1,"container-fluid","h-100"],[1,"row","position-relative",2,"height","calc(100% - 40px - 0.5rem)"],[1,"col"],[2,"margin-bottom","0.5rem"],[4,"ngIf"],["style","text-align: right",4,"ngIf"],[1,"col","d-flex","justify-content-center"],[1,"my-0","mb-2"],[1,"p-2"],["id","content",1,"page-title"],[2,"text-align","right"],["type","button","icon","",1,"btn","float-start","tpi-header-return",3,"click"],[1,"fas","fa-arrow-left",2,"margin-right","5px"],[1,"mb-0",2,"font-size","0.8rem","color","#666464"],[1,"mb-0",2,"font-size","0.8rem","color","#ff6e38","font-weight","bold"]],template:function(l,T){1&l&&(r.F$t(c),r.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),r.YNc(4,d,4,3,"div",4),r.YNc(5,_,9,5,"div",5),r.TgZ(6,"div",6),r.Hsn(7),r.qZA()(),r._UZ(8,"hr",7),r.Hsn(9,1),r._UZ(10,"div",8),r.qZA()()()),2&l&&(r.xp6(4),r.Q6J("ngIf",T.isDefault),r.xp6(1),r.Q6J("ngIf",!T.isDefault))},directives:[s.O5],pipes:[g.X$],styles:[".card.card-body[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:400;color:#5a5541}"]}),e})()},92718:(I,m,i)=>{i.d(m,{u:()=>t});var r=i(54004),s=i(70262),g=i(62843),d=i(87587),_=i(4516),c=i(89709),v=i(99291),o=i(38441),e=i(60991);let t=(()=>{class l{constructor(A,D,b,C,y){this.toolService=A,this.tokenService=D,this.router=b,this.ngxService=C,this.logoutService=y}canActivate(){return this.ngxService.stopAll(),!this.toolService.isTokenExpired()||this.toolService.refreshToken().pipe((0,r.U)(A=>!!A.access_token),(0,s.K)(this.handleError.bind(this)))}handleError(A){return setTimeout(()=>this.logoutService.logout()),(0,g._)(()=>A)}}return l.\u0275fac=function(A){return new(A||l)(d.LFG(_.g),d.LFG(c.B),d.LFG(v.F0),d.LFG(o.LA),d.LFG(e.P))},l.\u0275prov=d.Yz7({token:l,factory:l.\u0275fac}),l})()},86347:(I,m,i)=>{i.d(m,{DL:()=>r.D,u6:()=>g.u});var r=i(48895),g=(i(45240),i(92718));i(4516)},67520:(I,m,i)=>{i.d(m,{p:()=>_});var r=i(92340),s=i(57553),g=i(87587),d=i(96614);let _=(()=>{class c{constructor(o){this.api=o,this.api.baseUrl=r.N.apiUrl}get basePath(){return"dgrv4/11"}listAIProvider(){let o={ReqHeader:this.api.getReqHeader(s.Nx.listAIProvider),ReqBody:{}};return this.api.excuteNpPost(`${this.basePath}/DPB0250`,o)}listAIProvider_ignore1298(){let o={ReqHeader:this.api.getReqHeader(s.Nx.listAIProvider),ReqBody:{}};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0250`,o)}createAIProvider(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.createAIProvider),ReqBody:o};return this.api.excuteNpPost(`${this.basePath}/DPB0251`,e)}createAIProvider_before(){let o={ReqHeader:this.api.getReqHeader(s.Nx.createAIProvider),ReqBody:{}};return this.api.excuteNpPost(`${this.basePath}/DPB0251?before`,o)}getAIProvider(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.getAIProvider),ReqBody:{}};return this.api.excuteNpPost(`${this.basePath}/DPB0252/${o}`,e)}updateAIProvider(o,e){let t={ReqHeader:this.api.getReqHeader(s.Nx.updateAIProvider),ReqBody:e};return this.api.excuteNpPost(`${this.basePath}/DPB0253/${o}`,t)}deleteAIProvider(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.createAIProvider),ReqBody:{}};return this.api.excuteNpPost(`${this.basePath}/DPB0254/${o}`,e)}listAIAPIKEY(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.listAIAPIKEY),ReqBody:o};return this.api.excuteNpPost(`${this.basePath}/DPB0255`,e)}listAIAPIKEY_ignore1298(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.listAIAPIKEY),ReqBody:o};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0255`,e)}registerAIAPIKEY(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.registerAIAPIKEY),ReqBody:o};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0256`,e)}getAIAPIKEY(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.getAIAPIKEY),ReqBody:{}};return this.api.excuteNpPost(`${this.basePath}/DPB0257/${o}`,e)}updateAIAPIKEY(o,e){let t={ReqHeader:this.api.getReqHeader(s.Nx.updateAIAPIKEY),ReqBody:e};return this.api.excuteNpPost(`${this.basePath}/DPB0258/${o}`,t)}deleteAIAPIKEY(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.deleteAIAPIKEY),ReqBody:{}};return this.api.excuteNpPost(`${this.basePath}/DPB0259/${o}`,e)}listAIUsage(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.listAIUsage),ReqBody:o};return this.api.excuteNpPost(`${this.basePath}/DPB0260`,e)}listAIUsage_ignore1298(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.listAIUsage),ReqBody:o};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0260`,e)}getAIUsageDetail(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.getAIUsageDetail),ReqBody:{}};return this.api.excuteNpPost(`${this.basePath}/DPB02601/${o}`,e)}listAIPromptTemplate(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.listAIPromptTemplate),ReqBody:o};return this.api.excuteNpPost(`${this.basePath}/DPB0262`,e)}listAIPromptTemplate_ignore1298(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.listAIPromptTemplate),ReqBody:o};return this.api.excuteNpPost_ignore1298(`${this.basePath}/DPB0262`,e)}createAIPromptTemplate(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.listAIPromptTemplate),ReqBody:o};return this.api.excuteNpPost(`${this.basePath}/DPB0263`,e)}getAIPromptTemplate(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.getAIPromptTemplate),ReqBody:{}};return this.api.excuteNpPost(`${this.basePath}/DPB0264/${o}`,e)}updateAIPromptTemplate(o,e){let t={ReqHeader:this.api.getReqHeader(s.Nx.updateAIPromptTemplate),ReqBody:e};return this.api.excuteNpPost(`${this.basePath}/DPB0265/${o}`,t)}deleteAIPromptTemplate(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.deleteAIPromptTemplate),ReqBody:{}};return this.api.excuteNpPost(`${this.basePath}/DPB0266/${o}`,e)}listConsumerAIPromptTemplateSetting(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.listConsumerAIPromptTemplateSetting),ReqBody:o};return this.api.excuteNpPost(`${this.basePath}/DPB02671`,e)}updateConsumerAIPromptTemplateSetting(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.updateConsumerAIPromptTemplateSetting),ReqBody:o};return this.api.excuteNpPost(`${this.basePath}/DPB0267`,e)}deleteConsumerAIPromptTemplateSetting(o){let e={ReqHeader:this.api.getReqHeader(s.Nx.deleteConsumerAIPromptTemplateSetting),ReqBody:{}};return this.api.excuteNpPost(`${this.basePath}/DPB0268/${o}`,e)}}return c.\u0275fac=function(o){return new(o||c)(g.LFG(d.K))},c.\u0275prov=g.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);